<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Infinity Orbit - A cosmic productivity system inspired by gravitational mechanics">
    <meta name="theme-color" content="#000000">
    <title>INFINITY ORBIT â€” Cosmic Productivity System</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Rajdhani:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        /*=============================================
          CSS TOKENS & DESIGN SYSTEM
        =============================================*/
        :root {
            /* Core Palette - Interstellar Inspired */
            --color-void: #000000;
            --color-deep-space: #020204;
            --color-nebula: #0a0a12;
            --color-cosmic-dust: #12121a;
            
            /* Accent Colors - Tier System */
            --tier-25: #00f0ff;
            --tier-25-glow: rgba(0, 240, 255, 0.4);
            --tier-50: #ffd700;
            --tier-50-glow: rgba(255, 215, 0, 0.4);
            --tier-75: #ff2a6d;
            --tier-75-glow: rgba(255, 42, 109, 0.4);
            --tier-infinity: #d300c5;
            --tier-infinity-glow: rgba(211, 0, 197, 0.4);
            
            /* UI Colors */
            --color-gold: #c9a227;
            --color-gold-dim: rgba(201, 162, 39, 0.3);
            --color-orange: #d4740c;
            --color-success: #00ff88;
            --color-danger: #ff3344;
            --color-warning: #ffaa00;
            
            /* Neutrals */
            --color-white: #ffffff;
            --color-gray-100: #f0f0f0;
            --color-gray-200: #cccccc;
            --color-gray-300: #999999;
            --color-gray-400: #666666;
            --color-gray-500: #444444;
            --color-gray-600: #333333;
            --color-gray-700: #222222;
            --color-gray-800: #151515;
            --color-gray-900: #0a0a0a;
            
            /* Glass Effects */
            --glass-bg: rgba(8, 12, 18, 0.92);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-highlight: rgba(255, 255, 255, 0.05);
            
            /* Typography */
            --font-display: 'Bebas Neue', sans-serif;
            --font-ui: 'Rajdhani', sans-serif;
            --font-tech: 'Orbitron', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
            
            /* Spacing Scale */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            --space-3xl: 64px;
            
            /* Border Radius */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 16px;
            --radius-full: 9999px;
            
            /* Transitions */
            --transition-fast: 150ms ease;
            --transition-normal: 300ms ease;
            --transition-slow: 500ms ease;
            
            /* Z-Index Scale */
            --z-base: 1;
            --z-orbit: 10;
            --z-orbit-active: 50;
            --z-controls: 100;
            --z-panel: 200;
            --z-modal: 500;
            --z-hud: 1000;
            --z-toast: 2000;
            
            /* Shadows */
            --shadow-glow-sm: 0 0 10px;
            --shadow-glow-md: 0 0 20px;
            --shadow-glow-lg: 0 0 40px;
            --shadow-glow-xl: 0 0 60px;
        }

        /*=============================================
          CSS RESET & BASE
        =============================================*/
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: var(--font-ui);
            font-weight: 400;
            line-height: 1.5;
            color: var(--color-white);
            background: var(--color-deep-space);
            min-height: 100vh;
            overflow: hidden;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        button {
            font-family: inherit;
            cursor: pointer;
            border: none;
            background: none;
            color: inherit;
        }

        input, textarea {
            font-family: inherit;
            border: none;
            outline: none;
            background: none;
            color: inherit;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        ul, ol {
            list-style: none;
        }

        img, svg {
            display: block;
            max-width: 100%;
        }

        /* Focus Visible for Accessibility */
        :focus-visible {
            outline: 2px solid var(--color-gold);
            outline-offset: 2px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--color-gray-800);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--color-gray-600);
            border-radius: var(--radius-full);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--color-gray-500);
        }

        /*=============================================
          BACKGROUND & COSMIC EFFECTS
        =============================================*/
        .cosmic-bg {
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
        }

        /* Animated Star Field */
        .stars {
            position: absolute;
            inset: 0;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,0.8), transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.6), transparent),
                radial-gradient(1px 1px at 90px 40px, rgba(255,255,255,0.9), transparent),
                radial-gradient(2px 2px at 130px 80px, rgba(255,255,255,0.5), transparent),
                radial-gradient(1px 1px at 160px 120px, rgba(255,255,255,0.7), transparent);
            background-repeat: repeat;
            background-size: 200px 200px;
            animation: stars-drift 120s linear infinite;
        }

        .stars--layer-2 {
            background-image: 
                radial-gradient(1px 1px at 50px 60px, rgba(255,255,255,0.4), transparent),
                radial-gradient(2px 2px at 100px 30px, rgba(255,255,255,0.3), transparent),
                radial-gradient(1px 1px at 150px 100px, rgba(255,255,255,0.5), transparent);
            background-size: 300px 300px;
            animation: stars-drift 200s linear infinite reverse;
            opacity: 0.6;
        }

        .stars--layer-3 {
            background-image: 
                radial-gradient(1px 1px at 30px 90px, rgba(0,240,255,0.4), transparent),
                radial-gradient(1px 1px at 120px 50px, rgba(211,0,197,0.3), transparent),
                radial-gradient(1px 1px at 80px 140px, rgba(255,215,0,0.3), transparent);
            background-size: 400px 400px;
            animation: stars-drift 300s linear infinite;
            opacity: 0.4;
        }

        @keyframes stars-drift {
            from { transform: translateY(0) translateX(0); }
            to { transform: translateY(-200px) translateX(-200px); }
        }

        /* Nebula Gradient */
        .nebula {
            position: absolute;
            inset: 0;
            background: 
                radial-gradient(ellipse at 20% 80%, rgba(211, 0, 197, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(0, 240, 255, 0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(255, 215, 0, 0.04) 0%, transparent 60%);
            animation: nebula-pulse 20s ease-in-out infinite alternate;
        }

        @keyframes nebula-pulse {
            0% { opacity: 0.6; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.05); }
        }

        /* Black Hole Effect (Center) */
        .black-hole {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            pointer-events: none;
        }

        .black-hole__singularity {
            position: absolute;
            inset: 0;
            border-radius: 50%;
            background: radial-gradient(circle at center, 
                var(--color-void) 0%, 
                var(--color-void) 20%,
                transparent 70%
            );
        }

        .black-hole__accretion {
            position: absolute;
            inset: -50px;
            border-radius: 50%;
            background: conic-gradient(from 0deg, 
                transparent,
                rgba(255, 100, 50, 0.1),
                rgba(255, 200, 100, 0.15),
                rgba(255, 255, 200, 0.1),
                transparent
            );
            animation: accretion-spin 30s linear infinite;
            filter: blur(20px);
        }

        .black-hole__glow {
            position: absolute;
            inset: -100px;
            border-radius: 50%;
            background: radial-gradient(circle at center, 
                transparent 30%,
                rgba(255, 150, 50, 0.05) 50%,
                transparent 70%
            );
            animation: glow-pulse 5s ease-in-out infinite alternate;
        }

        @keyframes accretion-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes glow-pulse {
            0% { opacity: 0.5; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.1); }
        }

        /* Grid Overlay */
        .grid-overlay {
            position: absolute;
            inset: 0;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 60px 60px;
            mask-image: radial-gradient(circle at center, black 30%, transparent 80%);
            -webkit-mask-image: radial-gradient(circle at center, black 30%, transparent 80%);
        }

        /* Vignette */
        .vignette {
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at center, transparent 40%, rgba(0,0,0,0.8) 100%);
        }

        /*=============================================
          LAYOUT SYSTEM
        =============================================*/
        .app {
            position: relative;
            z-index: var(--z-base);
            display: grid;
            grid-template-rows: auto 1fr;
            height: 100vh;
            padding: var(--space-md);
            gap: var(--space-md);
        }

        .app__header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-sm) var(--space-md);
            border-bottom: 1px solid var(--glass-border);
        }

        .app__workspace {
            display: grid;
            grid-template-columns: 320px 1fr 300px;
            gap: var(--space-md);
            height: 100%;
            overflow: hidden;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .app__workspace {
                grid-template-columns: 280px 1fr 260px;
            }
        }

        @media (max-width: 1024px) {
            .app__workspace {
                grid-template-columns: 1fr;
            }
            
            .panel--editor,
            .panel--logs {
                display: none;
            }
            
            .panel--editor.is-active,
            .panel--logs.is-active {
                display: flex;
                position: fixed;
                inset: var(--space-md);
                z-index: var(--z-panel);
            }
        }

        @media (max-width: 600px) {
            .app {
                padding: var(--space-sm);
                gap: var(--space-sm);
            }
        }

        /*=============================================
          LOGO & BRANDING
        =============================================*/
        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .logo__icon {
            width: 40px;
            height: 40px;
            position: relative;
        }

        .logo__orbit {
            position: absolute;
            inset: 0;
            border: 2px solid var(--color-gold);
            border-radius: 50%;
            animation: logo-spin 10s linear infinite;
        }

        .logo__orbit::before {
            content: '';
            position: absolute;
            top: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 8px;
            background: var(--color-gold);
            border-radius: 50%;
            box-shadow: var(--shadow-glow-sm) var(--color-gold);
        }

        .logo__core {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 12px;
            height: 12px;
            background: var(--color-white);
            border-radius: 50%;
            box-shadow: var(--shadow-glow-md) var(--color-gold);
        }

        @keyframes logo-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .logo__text {
            font-family: var(--font-display);
            font-size: 2rem;
            letter-spacing: 6px;
            color: var(--color-white);
            text-shadow: var(--shadow-glow-sm) rgba(255,255,255,0.3);
        }

        .logo__version {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            color: var(--color-gray-400);
            margin-left: var(--space-sm);
        }

        /*=============================================
          HEADER CONTROLS
        =============================================*/
        .header-controls {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .header-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-sm);
            background: var(--glass-bg);
            color: var(--color-gray-300);
            font-size: 1.1rem;
            transition: var(--transition-fast);
        }

        .header-btn:hover {
            border-color: var(--color-gold);
            color: var(--color-gold);
            box-shadow: var(--shadow-glow-sm) var(--color-gold-dim);
        }

        .header-btn.is-active {
            background: var(--color-gold);
            color: var(--color-void);
            border-color: var(--color-gold);
        }

        /* Mobile Menu Toggle */
        .mobile-toggle {
            display: none;
        }

        @media (max-width: 1024px) {
            .mobile-toggle {
                display: flex;
            }
        }

        /*=============================================
          PANEL COMPONENT
        =============================================*/
        .panel {
            display: flex;
            flex-direction: column;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            overflow: hidden;
            transition: var(--transition-normal);
        }

        .panel.is-focused {
            border-color: var(--color-gold);
            box-shadow: 0 0 30px rgba(201, 162, 39, 0.1);
        }

        .panel__header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-md);
            border-bottom: 1px solid var(--glass-border);
            background: var(--glass-highlight);
        }

        .panel__title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-family: var(--font-tech);
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 2px;
            color: var(--color-gray-300);
            text-transform: uppercase;
        }

        .panel__indicator {
            width: 8px;
            height: 8px;
            background: var(--color-gold);
            border-radius: 50%;
            box-shadow: var(--shadow-glow-sm) var(--color-gold);
            animation: indicator-pulse 2s ease-in-out infinite;
        }

        @keyframes indicator-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .panel__actions {
            display: flex;
            gap: var(--space-xs);
        }

        .panel__action-btn {
            padding: var(--space-xs) var(--space-sm);
            font-family: var(--font-tech);
            font-size: 0.6rem;
            letter-spacing: 1px;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-sm);
            color: var(--color-gray-400);
            transition: var(--transition-fast);
        }

        .panel__action-btn:hover {
            border-color: var(--color-gold);
            color: var(--color-gold);
        }

        .panel__body {
            flex: 1;
            padding: var(--space-md);
            overflow-y: auto;
        }

        .panel__footer {
            padding: var(--space-md);
            border-top: 1px solid var(--glass-border);
        }

        /* Close Button for Mobile */
        .panel__close {
            display: none;
            width: 32px;
            height: 32px;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--color-gray-600);
            border-radius: var(--radius-sm);
            color: var(--color-gray-400);
            font-size: 1.2rem;
        }

        @media (max-width: 1024px) {
            .panel__close {
                display: flex;
            }
        }

        /*=============================================
          FORM COMPONENTS
        =============================================*/
        .form-group {
            margin-bottom: var(--space-md);
        }

        .form-label {
            display: block;
            font-family: var(--font-tech);
            font-size: 0.65rem;
            font-weight: 500;
            letter-spacing: 2px;
            color: var(--color-gray-400);
            margin-bottom: var(--space-xs);
            text-transform: uppercase;
        }

        .form-input {
            width: 100%;
            padding: var(--space-sm) var(--space-md);
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--color-gray-600);
            border-radius: var(--radius-sm);
            font-family: var(--font-ui);
            font-size: 1rem;
            font-weight: 500;
            color: var(--color-white);
            transition: var(--transition-fast);
        }

        .form-input::placeholder {
            color: var(--color-gray-500);
        }

        .form-input:focus {
            border-color: var(--color-gold);
            box-shadow: 0 0 20px rgba(201, 162, 39, 0.15);
        }

        .form-input--datetime {
            color-scheme: dark;
        }

        .form-hint {
            font-size: 0.75rem;
            color: var(--color-gray-500);
            margin-top: var(--space-xs);
        }

        /*=============================================
          TIER SELECTOR
        =============================================*/
        .tier-selector {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
        }

        .tier-option {
            position: relative;
            padding: var(--space-md) var(--space-sm);
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--color-gray-700);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition-fast);
            overflow: hidden;
        }

        .tier-option::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--tier-color);
            opacity: 0;
            transition: var(--transition-fast);
        }

        .tier-option:hover::before {
            opacity: 0.05;
        }

        .tier-option.is-selected {
            border-color: var(--tier-color);
            box-shadow: var(--shadow-glow-md) var(--tier-glow);
        }

        .tier-option.is-selected::before {
            opacity: 0.1;
        }

        .tier-option__value {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--tier-color);
            line-height: 1;
        }

        .tier-option__label {
            font-family: var(--font-tech);
            font-size: 0.55rem;
            color: var(--color-gray-500);
            margin-top: var(--space-xs);
            letter-spacing: 1px;
        }

        .tier-option--25 {
            --tier-color: var(--tier-25);
            --tier-glow: var(--tier-25-glow);
        }

        .tier-option--50 {
            --tier-color: var(--tier-50);
            --tier-glow: var(--tier-50-glow);
        }

        .tier-option--75 {
            --tier-color: var(--tier-75);
            --tier-glow: var(--tier-75-glow);
        }

        .tier-option--infinity {
            --tier-color: var(--tier-infinity);
            --tier-glow: var(--tier-infinity-glow);
        }

        /*=============================================
          PROCESS LIST (RUBRIC)
        =============================================*/
        .process-section {
            margin-top: var(--space-lg);
            padding-top: var(--space-md);
            border-top: 1px solid var(--glass-border);
        }

        .process-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-md);
        }

        .process-add-btn {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            border: 1px solid var(--color-gold);
            border-radius: var(--radius-sm);
            font-family: var(--font-tech);
            font-size: 0.6rem;
            letter-spacing: 1px;
            color: var(--color-gold);
            transition: var(--transition-fast);
        }

        .process-add-btn:hover {
            background: var(--color-gold);
            color: var(--color-void);
        }

        .process-input-row {
            display: none;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
            animation: fade-in 0.2s ease;
        }

        .process-input-row.is-visible {
            display: flex;
        }

        @keyframes fade-in {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .process-input {
            flex: 1;
            padding: var(--space-sm);
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--color-gray-600);
            border-radius: var(--radius-sm);
            font-size: 0.85rem;
        }

        .process-type-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-sm);
            font-weight: 700;
            font-size: 1.2rem;
            transition: var(--transition-fast);
        }

        .process-type-btn--positive {
            background: var(--tier-25);
            color: var(--color-void);
        }

        .process-type-btn--positive:hover {
            box-shadow: var(--shadow-glow-sm) var(--tier-25);
        }

        .process-type-btn--negative {
            background: var(--tier-75);
            color: var(--color-void);
        }

        .process-type-btn--negative:hover {
            box-shadow: var(--shadow-glow-sm) var(--tier-75);
        }

        .process-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .process-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-sm) var(--space-md);
            border-bottom: 1px solid var(--glass-border);
            transition: var(--transition-fast);
        }

        .process-item:hover {
            background: var(--glass-highlight);
        }

        .process-item__content {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .process-tag {
            padding: 2px 6px;
            border-radius: 2px;
            font-family: var(--font-tech);
            font-size: 0.55rem;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .process-tag--positive {
            background: var(--tier-25);
            color: var(--color-void);
        }

        .process-tag--negative {
            background: var(--tier-75);
            color: var(--color-void);
        }

        .process-item__text {
            font-size: 0.9rem;
            color: var(--color-gray-200);
        }

        .process-item__delete {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-gray-500);
            border-radius: var(--radius-sm);
            transition: var(--transition-fast);
        }

        .process-item__delete:hover {
            background: rgba(255, 42, 109, 0.2);
            color: var(--tier-75);
        }

        /*=============================================
          PRIMARY BUTTON
        =============================================*/
        .btn-primary {
            width: 100%;
            padding: var(--space-md);
            background: linear-gradient(135deg, var(--color-gold), var(--color-orange));
            border-radius: var(--radius-sm);
            font-family: var(--font-display);
            font-size: 1.3rem;
            letter-spacing: 3px;
            color: var(--color-void);
            transition: var(--transition-fast);
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: translateX(-100%);
            transition: transform 0.5s ease;
        }

        .btn-primary:hover::before {
            transform: translateX(100%);
        }

        .btn-primary:hover {
            box-shadow: var(--shadow-glow-md) var(--color-gold-dim);
            transform: translateY(-1px);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            width: 100%;
            padding: var(--space-sm);
            background: transparent;
            border: 1px solid var(--color-gray-600);
            border-radius: var(--radius-sm);
            font-family: var(--font-ui);
            font-size: 0.85rem;
            color: var(--color-gray-400);
            margin-top: var(--space-sm);
            transition: var(--transition-fast);
        }

        .btn-secondary:hover {
            border-color: var(--color-gray-400);
            color: var(--color-gray-200);
        }

        /*=============================================
          SPACE AREA (ORBIT CONTAINER)
        =============================================*/
        .space-area {
            position: relative;
            background: transparent;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .space-area__svg {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: var(--z-base);
        }

        .space-area__orbits {
            position: absolute;
            inset: 0;
            z-index: var(--z-orbit);
        }

        .space-area__status {
            position: absolute;
            bottom: var(--space-md);
            left: 50%;
            transform: translateX(-50%);
            font-family: var(--font-tech);
            font-size: 0.7rem;
            letter-spacing: 2px;
            color: var(--color-gray-500);
            pointer-events: none;
        }

        .space-area__empty {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }

        .space-area__empty-icon {
            font-size: 4rem;
            margin-bottom: var(--space-md);
            opacity: 0.2;
        }

        .space-area__empty-text {
            font-family: var(--font-tech);
            font-size: 0.8rem;
            letter-spacing: 2px;
            color: var(--color-gray-500);
            text-align: center;
        }

        /*=============================================
          CONNECTION LINES (SVG)
        =============================================*/
        .connection-line {
            fill: none;
            stroke: rgba(255, 255, 255, 0.15);
            stroke-width: 2;
            stroke-dasharray: 8, 8;
            animation: connection-flow 20s linear infinite;
        }

        .connection-line--active {
            stroke: rgba(255, 255, 255, 0.6);
            stroke-dasharray: none;
            filter: drop-shadow(0 0 4px rgba(255,255,255,0.5));
        }

        .connection-line--locked {
            stroke: rgba(255, 42, 109, 0.3);
        }

        @keyframes connection-flow {
            from { stroke-dashoffset: 0; }
            to { stroke-dashoffset: -100; }
        }

        .connection-hitbox {
            fill: none;
            stroke: transparent;
            stroke-width: 20;
            cursor: pointer;
            pointer-events: stroke;
        }

        .connection-arrow {
            fill: rgba(255, 255, 255, 0.4);
        }

        /*=============================================
          ORBIT NODE
        =============================================*/
        .orbit {
            position: absolute;
            cursor: grab;
            z-index: var(--z-orbit);
            touch-action: none;
            transition: z-index 0s;
        }

        .orbit:active {
            cursor: grabbing;
            z-index: var(--z-orbit-active) !important;
        }

        .orbit.is-dragging {
            z-index: var(--z-orbit-active) !important;
        }

        .orbit.is-locked {
            opacity: 0.35;
            filter: grayscale(0.8);
            pointer-events: none;
        }

        .orbit.is-completed .orbit__core {
            border-style: double;
            border-width: 5px;
        }

        .orbit.is-link-source .orbit__core {
            animation: link-source-pulse 0.8s ease-in-out infinite;
        }

        .orbit.is-link-target .orbit__core {
            cursor: crosshair;
            box-shadow: 
                0 0 30px var(--orbit-color),
                inset 0 0 20px rgba(255,255,255,0.2);
        }

        @keyframes link-source-pulse {
            0%, 100% { box-shadow: 0 0 20px var(--orbit-color); }
            50% { box-shadow: 0 0 40px var(--orbit-color), 0 0 60px var(--orbit-color); }
        }

        .orbit__core {
            position: absolute;
            inset: 0;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, 
                rgba(40, 40, 50, 0.9) 0%, 
                rgba(10, 10, 15, 0.95) 100%
            );
            border: 2px solid var(--orbit-color);
            box-shadow: 
                0 0 20px var(--orbit-glow),
                inset 0 0 30px rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            backdrop-filter: blur(5px);
            transition: var(--transition-normal);
        }

        .orbit__ring {
            position: absolute;
            inset: -8px;
            border-radius: 50%;
            border: 1px dashed var(--orbit-color);
            opacity: 0.5;
            animation: orbit-ring-spin 40s linear infinite;
            pointer-events: none;
        }

        .orbit__ring--inner {
            inset: -4px;
            border-style: dotted;
            animation-direction: reverse;
            animation-duration: 30s;
            opacity: 0.3;
        }

        @keyframes orbit-ring-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .orbit__particles {
            position: absolute;
            inset: 0;
            border-radius: 50%;
            overflow: hidden;
            pointer-events: none;
        }

        .orbit__particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--orbit-color);
            border-radius: 50%;
            animation: particle-float 3s ease-in-out infinite;
        }

        @keyframes particle-float {
            0%, 100% { opacity: 0; transform: translateY(0) scale(0); }
            50% { opacity: 1; transform: translateY(-20px) scale(1); }
        }

        .orbit__icon {
            font-size: 1.8em;
            line-height: 1;
            margin-bottom: 4%;
            text-shadow: 0 0 20px var(--orbit-color);
            color: var(--color-white);
        }

        .orbit__name {
            font-family: var(--font-ui);
            font-weight: 700;
            font-size: 0.85em;
            max-width: 80%;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: var(--orbit-color);
        }

        .orbit__duration {
            font-family: var(--font-tech);
            font-size: 0.5em;
            color: var(--color-gray-300);
            margin-top: 4%;
            letter-spacing: 1px;
        }

        .orbit__progress-ring {
            position: absolute;
            inset: -2px;
            pointer-events: none;
        }

        .orbit__progress-ring circle {
            fill: none;
            stroke-width: 3;
            transform: rotate(-90deg);
            transform-origin: center;
        }

        .orbit__progress-bg {
            stroke: rgba(255, 255, 255, 0.1);
        }

        .orbit__progress-fill {
            stroke: var(--orbit-color);
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s ease;
            filter: drop-shadow(0 0 3px var(--orbit-color));
        }

        /* Orbit Controls */
        .orbit__controls {
            position: absolute;
            top: 0;
            right: -36px;
            display: flex;
            flex-direction: column;
            gap: 6px;
            z-index: var(--z-controls);
            opacity: 0;
            transform: translateX(-5px);
            transition: var(--transition-fast);
        }

        .orbit:hover .orbit__controls,
        .orbit.is-link-source .orbit__controls {
            opacity: 1;
            transform: translateX(0);
        }

        .orbit__ctrl-btn {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid var(--color-gray-600);
            border-radius: 50%;
            font-size: 0.75rem;
            color: var(--color-gray-400);
            transition: var(--transition-fast);
        }

        .orbit__ctrl-btn:hover {
            transform: scale(1.15);
            border-color: var(--color-white);
            color: var(--color-white);
        }

        .orbit__ctrl-btn--launch {
            border-color: var(--orbit-color);
            color: var(--orbit-color);
            box-shadow: var(--shadow-glow-sm) var(--orbit-glow);
        }

        .orbit__ctrl-btn--launch:hover {
            background: var(--orbit-color);
            color: var(--color-void);
        }

        .orbit__ctrl-btn--link {
            border-color: var(--color-white);
            color: var(--color-white);
        }

        .orbit__ctrl-btn--link.is-active {
            background: var(--color-gold);
            border-color: var(--color-gold);
            color: var(--color-void);
            box-shadow: var(--shadow-glow-md) var(--color-gold);
        }

        .orbit__ctrl-btn--delete {
            border-color: var(--tier-75);
            color: var(--tier-75);
        }

        .orbit__ctrl-btn--delete:hover {
            background: var(--tier-75);
            color: var(--color-void);
        }

        /* Resize Handle */
        .orbit__resize {
            position: absolute;
            bottom: 5px;
            right: 5px;
            width: 16px;
            height: 16px;
            cursor: nwse-resize;
            z-index: var(--z-controls);
            opacity: 0;
            transition: var(--transition-fast);
        }

        .orbit:hover .orbit__resize {
            opacity: 0.6;
        }

        .orbit__resize:hover {
            opacity: 1 !important;
        }

        .orbit__resize::before,
        .orbit__resize::after {
            content: '';
            position: absolute;
            background: var(--color-white);
            border-radius: 1px;
        }

        .orbit__resize::before {
            bottom: 0;
            right: 0;
            width: 10px;
            height: 2px;
        }

        .orbit__resize::after {
            bottom: 0;
            right: 0;
            width: 2px;
            height: 10px;
        }

        /* Tier Color Variants */
        .orbit--tier-25 {
            --orbit-color: var(--tier-25);
            --orbit-glow: var(--tier-25-glow);
        }

        .orbit--tier-50 {
            --orbit-color: var(--tier-50);
            --orbit-glow: var(--tier-50-glow);
        }

        .orbit--tier-75 {
            --orbit-color: var(--tier-75);
            --orbit-glow: var(--tier-75-glow);
        }

        .orbit--tier-infinity {
            --orbit-color: var(--tier-infinity);
            --orbit-glow: var(--tier-infinity-glow);
        }

        /*=============================================
          LOG ENTRIES
        =============================================*/
        .log-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }

        .log-entry {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-md);
            background: var(--glass-highlight);
            border-radius: var(--radius-sm);
            border-left: 3px solid var(--log-color);
            transition: var(--transition-fast);
        }

        .log-entry:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .log-entry__info {
            flex: 1;
            min-width: 0;
        }

        .log-entry__name {
            font-weight: 600;
            color: var(--log-color);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .log-entry__meta {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 0.75rem;
            color: var(--color-gray-500);
            margin-top: var(--space-xs);
        }

        .log-entry__stats {
            text-align: right;
        }

        .log-entry__score {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--log-color);
            line-height: 1;
        }

        .log-entry__status {
            font-family: var(--font-tech);
            font-size: 0.6rem;
            letter-spacing: 1px;
            color: var(--color-gray-500);
            margin-top: var(--space-xs);
        }

        .log-entry__status--complete {
            color: var(--color-success);
        }

        .log-entry__status--aborted {
            color: var(--tier-75);
        }

        .log-entry__status--incomplete {
            color: var(--color-warning);
        }

        .log-empty {
            text-align: center;
            padding: var(--space-2xl);
            color: var(--color-gray-500);
        }

        .log-empty__icon {
            font-size: 2rem;
            margin-bottom: var(--space-md);
            opacity: 0.3;
        }

        .log-empty__text {
            font-family: var(--font-tech);
            font-size: 0.75rem;
            letter-spacing: 1px;
        }

        /*=============================================
          FOOTER BUTTONS (PANEL)
        =============================================*/
        .panel-footer-actions {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .panel-footer-actions__row {
            display: flex;
            gap: var(--space-sm);
        }

        .btn-util {
            flex: 1;
            padding: var(--space-sm);
            background: transparent;
            border: 1px solid var(--color-gray-600);
            border-radius: var(--radius-sm);
            font-family: var(--font-tech);
            font-size: 0.6rem;
            letter-spacing: 1px;
            color: var(--color-gray-400);
            transition: var(--transition-fast);
        }

        .btn-util:hover {
            border-color: var(--color-gray-400);
            color: var(--color-gray-200);
        }

        .btn-util--danger {
            border-color: rgba(255, 42, 109, 0.3);
            color: var(--tier-75);
        }

        .btn-util--danger:hover {
            border-color: var(--tier-75);
            background: rgba(255, 42, 109, 0.1);
        }

        .btn-util--gold {
            border-color: var(--color-gold-dim);
            color: var(--color-gold);
        }

        .btn-util--gold:hover {
            border-color: var(--color-gold);
            background: rgba(201, 162, 39, 0.1);
        }

        /*=============================================
          HUD OVERLAY (MISSION ACTIVE)
        =============================================*/
        .hud {
            position: fixed;
            inset: 0;
            z-index: var(--z-hud);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .hud.is-active {
            display: flex;
            animation: hud-enter 0.5s ease;
        }

        @keyframes hud-enter {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Cinematic Letterbox */
        .hud__letterbox {
            position: absolute;
            left: 0;
            right: 0;
            height: 60px;
            background: var(--color-void);
        }

        .hud__letterbox--top {
            top: 0;
        }

        .hud__letterbox--bottom {
            bottom: 0;
        }

        .hud__content {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 500px;
            width: 90%;
        }

        .hud__mission-name {
            font-family: var(--font-tech);
            font-size: 1.2rem;
            letter-spacing: 6px;
            color: var(--hud-color);
            margin-bottom: var(--space-lg);
            text-shadow: var(--shadow-glow-md) var(--hud-color);
        }

        .hud__timer {
            font-family: var(--font-display);
            font-size: 8rem;
            line-height: 1;
            color: var(--color-white);
            text-shadow: var(--shadow-glow-xl) var(--hud-color);
            margin-bottom: var(--space-lg);
        }

        @media (max-width: 600px) {
            .hud__timer {
                font-size: 5rem;
            }
        }

        .hud__timer--warning {
            animation: timer-warning 1s ease infinite;
        }

        @keyframes timer-warning {
            0%, 100% { color: var(--color-white); }
            50% { color: var(--tier-75); }
        }

        .hud__timer--expired {
            color: var(--tier-75);
            animation: timer-expired 0.5s ease infinite;
        }

        @keyframes timer-expired {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Integrity Bar */
        .hud__integrity {
            width: 100%;
            margin-bottom: var(--space-xl);
        }

        .hud__integrity-bar {
            width: 100%;
            height: 10px;
            background: var(--color-gray-800);
            border-radius: var(--radius-full);
            overflow: hidden;
            border: 1px solid var(--color-gray-700);
        }

        .hud__integrity-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--hud-color), var(--color-white));
            transition: width 0.5s ease;
            box-shadow: var(--shadow-glow-sm) var(--hud-color);
        }

        .hud__integrity-labels {
            display: flex;
            justify-content: space-between;
            margin-top: var(--space-sm);
            font-family: var(--font-tech);
            font-size: 0.7rem;
            letter-spacing: 1px;
        }

        .hud__integrity-label {
            color: var(--color-gray-500);
        }

        .hud__integrity-value {
            color: var(--color-white);
            font-weight: 600;
        }

        /* Process Checklist */
        .hud__checklist {
            width: 100%;
            max-height: 300px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--color-gray-700);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-xl);
        }

        .hud__checklist-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            border-bottom: 1px solid var(--glass-border);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .hud__checklist-item:last-child {
            border-bottom: none;
        }

        .hud__checklist-item:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .hud__checklist-checkbox {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--color-gray-600);
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            color: transparent;
            transition: var(--transition-fast);
        }

        .hud__checklist-item.is-checked .hud__checklist-checkbox {
            background: var(--hud-color);
            border-color: var(--hud-color);
            color: var(--color-void);
        }

        .hud__checklist-item--negative .hud__checklist-checkbox {
            border-color: var(--tier-75);
        }

        .hud__checklist-item--negative.is-checked .hud__checklist-checkbox {
            background: var(--tier-75);
            border-color: var(--tier-75);
        }

        .hud__checklist-text {
            flex: 1;
            font-size: 1rem;
        }

        .hud__checklist-item--negative .hud__checklist-text {
            color: rgba(255, 150, 150, 0.8);
        }

        .hud__checklist-type {
            font-family: var(--font-tech);
            font-size: 0.55rem;
            padding: 2px 6px;
            border-radius: 2px;
            letter-spacing: 1px;
        }

        .hud__checklist-type--positive {
            background: rgba(0, 240, 255, 0.2);
            color: var(--tier-25);
        }

        .hud__checklist-type--negative {
            background: rgba(255, 42, 109, 0.2);
            color: var(--tier-75);
        }

        /* HUD Actions */
        .hud__actions {
            display: flex;
            gap: var(--space-lg);
        }

        .hud__btn {
            padding: var(--space-md) var(--space-2xl);
            background: transparent;
            border: 1px solid var(--color-gray-600);
            border-radius: var(--radius-sm);
            font-family: var(--font-tech);
            font-size: 0.9rem;
            letter-spacing: 2px;
            color: var(--color-white);
            transition: var(--transition-fast);
        }

        .hud__btn:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .hud__btn--abort {
            border-color: var(--tier-75);
            color: var(--tier-75);
        }

        .hud__btn--abort:hover {
            background: rgba(255, 42, 109, 0.1);
        }

        .hud__btn--complete {
            border-color: var(--tier-25);
            color: var(--tier-25);
            box-shadow: var(--shadow-glow-sm) var(--tier-25-glow);
        }

        .hud__btn--complete:hover {
            background: rgba(0, 240, 255, 0.1);
            box-shadow: var(--shadow-glow-md) var(--tier-25-glow);
        }

        .hud__btn--pause {
            border-color: var(--tier-50);
            color: var(--tier-50);
        }

        /*=============================================
          POST-SESSION MODAL
        =============================================*/
        .modal-overlay {
            position: fixed;
            inset: 0;
            z-index: var(--z-modal);
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
        }

        .modal-overlay.is-active {
            display: flex;
            animation: modal-enter 0.3s ease;
        }

        @keyframes modal-enter {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            width: 90%;
            max-width: 450px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            overflow: hidden;
            animation: modal-scale 0.3s ease;
        }

        @keyframes modal-scale {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal__header {
            padding: var(--space-lg);
            text-align: center;
            border-bottom: 1px solid var(--glass-border);
        }

        .modal__icon {
            font-size: 3rem;
            margin-bottom: var(--space-md);
        }

        .modal__title {
            font-family: var(--font-display);
            font-size: 1.8rem;
            letter-spacing: 3px;
            color: var(--color-white);
        }

        .modal__subtitle {
            font-family: var(--font-tech);
            font-size: 0.75rem;
            letter-spacing: 2px;
            color: var(--color-gray-400);
            margin-top: var(--space-sm);
        }

        .modal__body {
            padding: var(--space-lg);
        }

        .modal__question {
            text-align: center;
            font-size: 1.1rem;
            color: var(--color-gray-200);
            margin-bottom: var(--space-lg);
        }

        .modal__actions {
            display: flex;
            gap: var(--space-md);
        }

        .modal__btn {
            flex: 1;
            padding: var(--space-md);
            border-radius: var(--radius-sm);
            font-family: var(--font-display);
            font-size: 1.2rem;
            letter-spacing: 2px;
            transition: var(--transition-fast);
        }

        .modal__btn--yes {
            background: var(--color-success);
            color: var(--color-void);
        }

        .modal__btn--yes:hover {
            box-shadow: var(--shadow-glow-md) rgba(0, 255, 136, 0.3);
        }

        .modal__btn--no {
            background: transparent;
            border: 1px solid var(--tier-75);
            color: var(--tier-75);
        }

        .modal__btn--no:hover {
            background: rgba(255, 42, 109, 0.1);
        }

        /*=============================================
          CONFIRM MODAL (DELETE, ETC)
        =============================================*/
        .confirm-modal__message {
            text-align: center;
            font-size: 1rem;
            color: var(--color-gray-300);
            margin-bottom: var(--space-lg);
            line-height: 1.6;
        }

        .confirm-modal__actions {
            display: flex;
            gap: var(--space-md);
        }

        .confirm-modal__btn {
            flex: 1;
            padding: var(--space-md);
            border-radius: var(--radius-sm);
            font-family: var(--font-tech);
            font-size: 0.85rem;
            letter-spacing: 1px;
            transition: var(--transition-fast);
        }

        .confirm-modal__btn--cancel {
            background: transparent;
            border: 1px solid var(--color-gray-600);
            color: var(--color-gray-400);
        }

        .confirm-modal__btn--cancel:hover {
            border-color: var(--color-gray-400);
            color: var(--color-white);
        }

        .confirm-modal__btn--confirm {
            background: var(--tier-75);
            color: var(--color-void);
        }

        .confirm-modal__btn--confirm:hover {
            box-shadow: var(--shadow-glow-sm) var(--tier-75-glow);
        }

               /*=============================================
          IMPORT/EXPORT MODAL (continued)
        =============================================*/
        .data-modal__textarea {
            width: 100%;
            height: 200px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--color-gray-600);
            border-radius: var(--radius-sm);
            padding: var(--space-md);
            font-family: var(--font-mono);
            font-size: 0.75rem;
            color: var(--color-gray-200);
            resize: none;
            margin-bottom: var(--space-md);
        }

        .data-modal__textarea:focus {
            border-color: var(--color-gold);
        }

        .data-modal__actions {
            display: flex;
            gap: var(--space-sm);
        }

        .data-modal__btn {
            flex: 1;
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-sm);
            font-family: var(--font-tech);
            font-size: 0.75rem;
            letter-spacing: 1px;
            transition: var(--transition-fast);
        }

        .data-modal__btn--export {
            background: var(--color-gold);
            color: var(--color-void);
        }

        .data-modal__btn--import {
            background: var(--tier-25);
            color: var(--color-void);
        }

        .data-modal__btn--close {
            background: transparent;
            border: 1px solid var(--color-gray-600);
            color: var(--color-gray-400);
        }

        /*=============================================
          TOAST NOTIFICATIONS
        =============================================*/
        .toast-container {
            position: fixed;
            top: var(--space-lg);
            left: 50%;
            transform: translateX(-50%);
            z-index: var(--z-toast);
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
            pointer-events: none;
        }

        .toast {
            padding: var(--space-sm) var(--space-lg);
            background: var(--color-gold);
            border-radius: var(--radius-full);
            font-family: var(--font-tech);
            font-size: 0.8rem;
            letter-spacing: 1px;
            color: var(--color-void);
            box-shadow: var(--shadow-glow-md) var(--color-gold-dim);
            opacity: 0;
            transform: translateY(-20px);
            transition: var(--transition-normal);
            pointer-events: auto;
        }

        .toast.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .toast--success {
            background: var(--color-success);
            box-shadow: var(--shadow-glow-md) rgba(0, 255, 136, 0.3);
        }

        .toast--error {
            background: var(--tier-75);
            box-shadow: var(--shadow-glow-md) var(--tier-75-glow);
        }

        .toast--info {
            background: var(--tier-25);
            box-shadow: var(--shadow-glow-md) var(--tier-25-glow);
        }

        /*=============================================
          KEYBOARD SHORTCUTS HELP
        =============================================*/
        .shortcuts-modal__list {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .shortcuts-modal__item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-sm) 0;
            border-bottom: 1px solid var(--glass-border);
        }

        .shortcuts-modal__key {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 28px;
            height: 28px;
            padding: 0 var(--space-sm);
            background: var(--color-gray-800);
            border: 1px solid var(--color-gray-600);
            border-radius: var(--radius-sm);
            font-family: var(--font-mono);
            font-size: 0.75rem;
            color: var(--color-gray-200);
        }

        .shortcuts-modal__desc {
            font-size: 0.85rem;
            color: var(--color-gray-400);
        }

        /*=============================================
          AUDIO TOGGLE
        =============================================*/
        .audio-toggle {
            position: relative;
        }

        .audio-toggle.is-muted .header-btn {
            color: var(--color-gray-600);
        }

        /*=============================================
          UTILITY CLASSES
        =============================================*/
        .hidden {
            display: none !important;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .text-center {
            text-align: center;
        }

        .text-gold {
            color: var(--color-gold);
        }

        .text-danger {
            color: var(--tier-75);
        }

        .text-success {
            color: var(--color-success);
        }

        .mt-md {
            margin-top: var(--space-md);
        }

        .mb-md {
            margin-bottom: var(--space-md);
        }

        /*=============================================
          ANIMATIONS
        =============================================*/
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes glow-pulse-strong {
            0%, 100% { 
                box-shadow: 0 0 20px var(--orbit-color), 0 0 40px var(--orbit-glow);
            }
            50% { 
                box-shadow: 0 0 40px var(--orbit-color), 0 0 80px var(--orbit-glow);
            }
        }

        .animate-pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        .animate-shake {
            animation: shake 0.3s ease;
        }

    </style>
</head>
<body>

    <!--===========================================
        COSMIC BACKGROUND
    ============================================-->
    <div class="cosmic-bg" aria-hidden="true">
        <div class="stars"></div>
        <div class="stars stars--layer-2"></div>
        <div class="stars stars--layer-3"></div>
        <div class="nebula"></div>
        <div class="black-hole">
            <div class="black-hole__glow"></div>
            <div class="black-hole__accretion"></div>
            <div class="black-hole__singularity"></div>
        </div>
        <div class="grid-overlay"></div>
        <div class="vignette"></div>
    </div>

    <!--===========================================
        TOAST CONTAINER
    ============================================-->
    <div class="toast-container" id="toastContainer" aria-live="polite"></div>

    <!--===========================================
        MAIN APPLICATION
    ============================================-->
    <div class="app">
        
        <!--=== HEADER ===-->
        <header class="app__header">
            <div class="logo">
                <div class="logo__icon" aria-hidden="true">
                    <div class="logo__orbit"></div>
                    <div class="logo__core"></div>
                </div>
                <h1 class="logo__text">INFINITY ORBIT</h1>
                <span class="logo__version">v2.0</span>
            </div>
            
            <div class="header-controls">
                <button 
                    class="header-btn mobile-toggle" 
                    id="btnToggleEditor"
                    aria-label="Toggle Editor Panel"
                    title="Editor (E)"
                >
                    âœŽ
                </button>
                <button 
                    class="header-btn mobile-toggle" 
                    id="btnToggleLogs"
                    aria-label="Toggle Logs Panel"
                    title="Logs (L)"
                >
                    ðŸ“‹
                </button>
                <button 
                    class="header-btn" 
                    id="btnDataModal"
                    aria-label="Import/Export Data"
                    title="Import/Export (I)"
                >
                    ðŸ’¾
                </button>
                <button 
                    class="header-btn" 
                    id="btnShortcuts"
                    aria-label="Keyboard Shortcuts"
                    title="Shortcuts (?)"
                >
                    âŒ¨
                </button>
                <button 
                    class="header-btn" 
                    id="btnToggleAudio"
                    aria-label="Toggle Sound"
                    title="Sound (M)"
                >
                    ðŸ”Š
                </button>
            </div>
        </header>

        <!--=== WORKSPACE ===-->
        <main class="app__workspace">
            
            <!--=== EDITOR PANEL ===-->
            <aside class="panel panel--editor" id="panelEditor" role="complementary" aria-label="Orbit Editor">
                <div class="panel__header">
                    <div class="panel__title">
                        <span class="panel__indicator"></span>
                        <span id="editorPanelTitle">MISSION COMMAND</span>
                    </div>
                    <button class="panel__close" id="btnCloseEditor" aria-label="Close Editor">Ã—</button>
                </div>
                
                <div class="panel__body">
                    <!-- Tier Selector -->
                    <fieldset class="tier-selector" role="radiogroup" aria-label="Select Duration Tier">
                        <button 
                            type="button"
                            class="tier-option tier-option--25" 
                            data-tier="25" 
                            data-duration="25"
                            role="radio"
                            aria-checked="false"
                        >
                            <div class="tier-option__value">25</div>
                            <div class="tier-option__label">MINUTES</div>
                        </button>
                        <button 
                            type="button"
                            class="tier-option tier-option--50" 
                            data-tier="50" 
                            data-duration="50"
                            role="radio"
                            aria-checked="false"
                        >
                            <div class="tier-option__value">50</div>
                            <div class="tier-option__label">MINUTES</div>
                        </button>
                        <button 
                            type="button"
                            class="tier-option tier-option--75" 
                            data-tier="75" 
                            data-duration="75"
                            role="radio"
                            aria-checked="false"
                        >
                            <div class="tier-option__value">75</div>
                            <div class="tier-option__label">MINUTES</div>
                        </button>
                        <button 
                            type="button"
                            class="tier-option tier-option--infinity" 
                            data-tier="infinity" 
                            data-duration="1440"
                            role="radio"
                            aria-checked="false"
                        >
                            <div class="tier-option__value">âˆž</div>
                            <div class="tier-option__label">HORIZON</div>
                        </button>
                    </fieldset>

                    <!-- Orbit Details -->
                    <div class="form-group">
                        <label class="form-label" for="inputOrbitName">CODENAME</label>
                        <input 
                            type="text" 
                            class="form-input" 
                            id="inputOrbitName" 
                            placeholder="e.g., Protocol Alpha"
                            maxlength="50"
                            autocomplete="off"
                        >
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="inputOrbitObjective">OBJECTIVE</label>
                        <input 
                            type="text" 
                            class="form-input" 
                            id="inputOrbitObjective" 
                            placeholder="What must you achieve to escape?"
                            maxlength="200"
                            autocomplete="off"
                        >
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="inputOrbitDeadline">DEADLINE</label>
                        <input 
                            type="datetime-local" 
                            class="form-input form-input--datetime" 
                            id="inputOrbitDeadline"
                        >
                        <p class="form-hint">Leave empty for daily/recurring orbits</p>
                    </div>

                    <!-- Process Section -->
                    <section class="process-section">
                        <div class="process-header">
                            <label class="form-label">PROCESSES (RUBRIC)</label>
                            <button 
                                type="button" 
                                class="process-add-btn" 
                                id="btnToggleProcessInput"
                                aria-expanded="false"
                            >
                                <span>+</span> ADD
                            </button>
                        </div>

                        <div class="process-input-row" id="processInputRow">
                            <input 
                                type="text" 
                                class="form-input process-input" 
                                id="inputProcessText" 
                                placeholder="Enter process/task..."
                                maxlength="100"
                            >
                            <button 
                                type="button" 
                                class="process-type-btn process-type-btn--positive" 
                                id="btnAddPositive"
                                aria-label="Add as positive process"
                                title="Positive (+)"
                            >
                                +
                            </button>
                            <button 
                                type="button" 
                                class="process-type-btn process-type-btn--negative" 
                                id="btnAddNegative"
                                aria-label="Add as negative process"
                                title="Negative (-)"
                            >
                                âˆ’
                            </button>
                        </div>

                        <div class="process-list" id="processList" role="list"></div>
                    </section>
                </div>

                <div class="panel__footer">
                    <button type="button" class="btn-primary" id="btnSaveOrbit">
                        INITIALIZE ORBIT
                    </button>
                    <button type="button" class="btn-secondary hidden" id="btnCancelEdit">
                        CANCEL
                    </button>
                </div>
            </aside>

            <!--=== SPACE AREA ===-->
            <section class="panel space-area" id="spaceArea" role="main" aria-label="Orbit Space">
                <svg class="space-area__svg" id="svgConnections">
                    <defs>
                        <marker 
                            id="arrowMarker" 
                            markerWidth="10" 
                            markerHeight="10" 
                            refX="8" 
                            refY="3" 
                            orient="auto" 
                            markerUnits="strokeWidth"
                        >
                            <path d="M0,0 L0,6 L9,3 z" class="connection-arrow"/>
                        </marker>
                    </defs>
                </svg>
                
                <div class="space-area__orbits" id="orbitContainer"></div>
                
                <div class="space-area__empty" id="emptyState">
                    <div class="space-area__empty-icon">ðŸŒŒ</div>
                    <p class="space-area__empty-text">
                        NO ACTIVE ORBITS<br>
                        <span style="opacity: 0.5;">Initialize a mission to begin</span>
                    </p>
                </div>

                <div class="space-area__status">
                    <span id="systemStatus">SYSTEM READY</span>
                </div>
            </section>

            <!--=== LOGS PANEL ===-->
            <aside class="panel panel--logs" id="panelLogs" role="complementary" aria-label="Flight Logs">
                <div class="panel__header">
                    <div class="panel__title">
                        <span class="panel__indicator"></span>
                        FLIGHT LOGS
                    </div>
                    <button class="panel__close" id="btnCloseLogs" aria-label="Close Logs">Ã—</button>
                </div>
                
                <div class="panel__body" id="logList"></div>

                <div class="panel__footer">
                    <div class="panel-footer-actions">
                        <div class="panel-footer-actions__row">
                            <button type="button" class="btn-util btn-util--gold" id="btnResetProgress">
                                RESET PROGRESS
                            </button>
                            <button type="button" class="btn-util" id="btnClearLogs">
                                PURGE LOGS
                            </button>
                        </div>
                        <button type="button" class="btn-util btn-util--danger" id="btnClearLinks">
                            SEVER ALL CONNECTIONS
                        </button>
                    </div>
                </div>
            </aside>

        </main>
    </div>

    <!--===========================================
        HUD OVERLAY (MISSION ACTIVE)
    ============================================-->
    <div class="hud" id="hud" role="dialog" aria-modal="true" aria-labelledby="hudMissionName">
        <div class="hud__letterbox hud__letterbox--top"></div>
        <div class="hud__letterbox hud__letterbox--bottom"></div>
        
        <div class="hud__content">
            <h2 class="hud__mission-name" id="hudMissionName">MISSION ACTIVE</h2>
            <div class="hud__timer" id="hudTimer" aria-live="polite">00:00</div>
            
            <div class="hud__integrity">
                <div class="hud__integrity-bar">
                    <div class="hud__integrity-fill" id="hudIntegrityFill" style="width: 100%"></div>
                </div>
                <div class="hud__integrity-labels">
                    <span class="hud__integrity-label">INTEGRITY</span>
                    <span class="hud__integrity-value" id="hudIntegrityValue">100%</span>
                </div>
            </div>

            <div class="hud__checklist" id="hudChecklist" role="list"></div>

            <div class="hud__actions">
                <button type="button" class="hud__btn hud__btn--pause" id="btnPauseMission">
                    PAUSE
                </button>
                <button type="button" class="hud__btn hud__btn--abort" id="btnAbortMission">
                    ABORT
                </button>
                <button type="button" class="hud__btn hud__btn--complete" id="btnCompleteMission">
                    COMPLETE
                </button>
            </div>
        </div>
    </div>

    <!--===========================================
        POST-SESSION MODAL
    ============================================-->
    <div class="modal-overlay" id="modalPostSession" role="dialog" aria-modal="true" aria-labelledby="postSessionTitle">
        <div class="modal">
            <div class="modal__header">
                <div class="modal__icon" id="postSessionIcon">ðŸŽ¯</div>
                <h2 class="modal__title" id="postSessionTitle">MISSION DEBRIEF</h2>
                <p class="modal__subtitle" id="postSessionSubtitle">Session Complete</p>
            </div>
            <div class="modal__body">
                <p class="modal__question">Did you achieve the objective?</p>
                <div class="modal__actions">
                    <button type="button" class="modal__btn modal__btn--no" id="btnObjectiveNo">
                        NOT YET
                    </button>
                    <button type="button" class="modal__btn modal__btn--yes" id="btnObjectiveYes">
                        YES
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--===========================================
        CONFIRM MODAL
    ============================================-->
    <div class="modal-overlay" id="modalConfirm" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
        <div class="modal">
            <div class="modal__header">
                <div class="modal__icon">âš ï¸</div>
                <h2 class="modal__title" id="confirmTitle">CONFIRM ACTION</h2>
            </div>
            <div class="modal__body">
                <p class="confirm-modal__message" id="confirmMessage">Are you sure?</p>
                <div class="confirm-modal__actions">
                    <button type="button" class="confirm-modal__btn confirm-modal__btn--cancel" id="btnConfirmCancel">
                        CANCEL
                    </button>
                    <button type="button" class="confirm-modal__btn confirm-modal__btn--confirm" id="btnConfirmOk">
                        CONFIRM
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--===========================================
        DATA IMPORT/EXPORT MODAL
    ============================================-->
    <div class="modal-overlay" id="modalData" role="dialog" aria-modal="true" aria-labelledby="dataTitle">
        <div class="modal">
            <div class="modal__header">
                <div class="modal__icon">ðŸ’¾</div>
                <h2 class="modal__title" id="dataTitle">DATA MANAGEMENT</h2>
                <p class="modal__subtitle">Export or Import your orbit data</p>
            </div>
            <div class="modal__body">
                <textarea 
                    class="data-modal__textarea" 
                    id="dataTextarea" 
                    placeholder="JSON data will appear here..."
                    spellcheck="false"
                ></textarea>
                <div class="data-modal__actions">
                    <button type="button" class="data-modal__btn data-modal__btn--export" id="btnExportData">
                        EXPORT
                    </button>
                    <button type="button" class="data-modal__btn data-modal__btn--import" id="btnImportData">
                        IMPORT
                    </button>
                    <button type="button" class="data-modal__btn data-modal__btn--close" id="btnCloseDataModal">
                        CLOSE
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--===========================================
        SHORTCUTS MODAL
    ============================================-->
    <div class="modal-overlay" id="modalShortcuts" role="dialog" aria-modal="true" aria-labelledby="shortcutsTitle">
        <div class="modal">
            <div class="modal__header">
                <div class="modal__icon">âŒ¨ï¸</div>
                <h2 class="modal__title" id="shortcutsTitle">KEYBOARD SHORTCUTS</h2>
            </div>
            <div class="modal__body">
                <div class="shortcuts-modal__list">
                    <div class="shortcuts-modal__item">
                        <kbd class="shortcuts-modal__key">E</kbd>
                        <span class="shortcuts-modal__desc">Toggle Editor Panel</span>
                    </div>
                    <div class="shortcuts-modal__item">
                        <kbd class="shortcuts-modal__key">L</kbd>
                        <span class="shortcuts-modal__desc">Toggle Logs Panel</span>
                    </div>
                    <div class="shortcuts-modal__item">
                        <kbd class="shortcuts-modal__key">I</kbd>
                        <span class="shortcuts-modal__desc">Import/Export Data</span>
                    </div>
                    <div class="shortcuts-modal__item">
                        <kbd class="shortcuts-modal__key">M</kbd>
                        <span class="shortcuts-modal__desc">Toggle Sound</span>
                    </div>
                    <div class="shortcuts-modal__item">
                        <kbd class="shortcuts-modal__key">Space</kbd>
                        <span class="shortcuts-modal__desc">Pause/Resume Timer</span>
                    </div>
                    <div class="shortcuts-modal__item">
                        <kbd class="shortcuts-modal__key">Esc</kbd>
                        <span class="shortcuts-modal__desc">Close Modal / Cancel Link</span>
                    </div>
                    <div class="shortcuts-modal__item">
                        <kbd class="shortcuts-modal__key">?</kbd>
                        <span class="shortcuts-modal__desc">Show This Help</span>
                    </div>
                </div>
                <button type="button" class="btn-secondary mt-md" id="btnCloseShortcuts">
                    CLOSE
                </button>
            </div>
        </div>
    </div>

    <!--===========================================
        JAVASCRIPT - APPLICATION LOGIC
    ============================================-->
    <script>
    (function() {
        'use strict';

        /*=============================================
          CONFIGURATION
        =============================================*/
        const CONFIG = {
            STORAGE_KEY: 'infinityOrbit_v2',
            
            TIERS: {
                '25': { duration: 25, color: '#00f0ff', glow: 'rgba(0, 240, 255, 0.4)', label: '25 MIN' },
                '50': { duration: 50, color: '#ffd700', glow: 'rgba(255, 215, 0, 0.4)', label: '50 MIN' },
                '75': { duration: 75, color: '#ff2a6d', glow: 'rgba(255, 42, 109, 0.4)', label: '75 MIN' },
                'infinity': { duration: 1440, color: '#d300c5', glow: 'rgba(211, 0, 197, 0.4)', label: 'âˆž HORIZON' }
            },
            
            ORBIT_DEFAULTS: {
                size: 140,
                minSize: 80,
                maxSize: 250
            },
            
            AUDIO: {
                enabled: true,
                volume: 0.3
            },
            
            TIMER_WARNING_THRESHOLD: 60, // seconds
        };

        /*=============================================
          APPLICATION STATE
        =============================================*/
        const State = {
            // Data
            orbits: [],
            connections: [],
            logs: [],
            
            // Editor state
            editor: {
                isEditing: false,
                editingId: null,
                selectedTier: null,
                processes: []
            },
            
            // Mission state
            mission: {
                isActive: false,
                isPaused: false,
                orbitId: null,
                timeRemaining: 0,
                checklist: [],
                timerId: null
            },
            
            // UI state
            ui: {
                linkingOrbitId: null,
                dragging: { active: false, orbitId: null, offsetX: 0, offsetY: 0 },
                resizing: { active: false, orbitId: null, startX: 0, startSize: 0 },
                audioEnabled: true
            },
            
            // Pending confirmations
            pending: {
                confirmCallback: null,
                postSessionOrbitId: null
            }
        };

        /*=============================================
          DOM CACHE
        =============================================*/
        const DOM = {
            // Panels
            panelEditor: null,
            panelLogs: null,
            spaceArea: null,
            orbitContainer: null,
            svgConnections: null,
            
            // Editor inputs
            inputOrbitName: null,
            inputOrbitObjective: null,
            inputOrbitDeadline: null,
            inputProcessText: null,
            processList: null,
            processInputRow: null,
            
            // Buttons
            btnSaveOrbit: null,
            btnCancelEdit: null,
            btnToggleProcessInput: null,
            
            // HUD
            hud: null,
            hudMissionName: null,
            hudTimer: null,
            hudIntegrityFill: null,
            hudIntegrityValue: null,
            hudChecklist: null,
            
            // Modals
            modalPostSession: null,
            modalConfirm: null,
            modalData: null,
            modalShortcuts: null,
            
            // Other
            toastContainer: null,
            logList: null,
            emptyState: null,
            systemStatus: null
        };

        /*=============================================
          UTILITIES
        =============================================*/
        const Utils = {
            /**
             * Generate unique ID
             */
            generateId() {
                return Date.now().toString(36) + Math.random().toString(36).substr(2);
            },
            
            /**
             * Format time as MM:SS
             */
            formatTime(seconds) {
                const mins = Math.floor(Math.abs(seconds) / 60);
                const secs = Math.abs(seconds) % 60;
                const sign = seconds < 0 ? '-' : '';
                return `${sign}${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            },
            
            /**
             * Format date for display
             */
            formatDate(dateString) {
                if (!dateString) return 'No deadline';
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            },
            
            /**
             * Format timestamp for logs
             */
            formatTimestamp(date = new Date()) {
                return date.toLocaleTimeString('en-US', {
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
            },
            
            /**
             * Clamp value between min and max
             */
            clamp(value, min, max) {
                return Math.max(min, Math.min(max, value));
            },
            
            /**
             * Debounce function
             */
            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            },
            
            /**
             * Deep clone object
             */
            clone(obj) {
                return JSON.parse(JSON.stringify(obj));
            },
            
            /**
             * Escape HTML to prevent XSS
             */
            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        };

        /*=============================================
          STORAGE SERVICE
        =============================================*/
        const Storage = {
            save() {
                try {
                    const data = {
                        orbits: State.orbits,
                        connections: State.connections,
                        logs: State.logs,
                        settings: {
                            audioEnabled: State.ui.audioEnabled
                        },
                        version: '2.0',
                        savedAt: new Date().toISOString()
                    };
                    localStorage.setItem(CONFIG.STORAGE_KEY, JSON.stringify(data));
                } catch (e) {
                    console.error('Failed to save data:', e);
                    Toast.show('Failed to save data', 'error');
                }
            },
            
            load() {
                try {
                    const raw = localStorage.getItem(CONFIG.STORAGE_KEY);
                    if (!raw) return false;
                    
                    const data = JSON.parse(raw);
                    State.orbits = data.orbits || [];
                    State.connections = data.connections || [];
                    State.logs = data.logs || [];
                    
                    if (data.settings) {
                        State.ui.audioEnabled = data.settings.audioEnabled ?? true;
                    }
                    
                    return true;
                } catch (e) {
                    console.error('Failed to load data:', e);
                    return false;
                }
            },
            
            export() {
                const data = {
                    orbits: State.orbits,
                    connections: State.connections,
                    logs: State.logs,
                    exportedAt: new Date().toISOString(),
                    version: '2.0'
                };
                return JSON.stringify(data, null, 2);
            },
            
            import(jsonString) {
                try {
                    const data = JSON.parse(jsonString);
                    
                    if (!data.orbits || !Array.isArray(data.orbits)) {
                        throw new Error('Invalid data format');
                    }
                    
                    State.orbits = data.orbits;
                    State.connections = data.connections || [];
                    State.logs = data.logs || [];
                    
                    Storage.save();
                    return true;
                } catch (e) {
                    console.error('Import failed:', e);
                    return false;
                }
            },
            
            clear() {
                localStorage.removeItem(CONFIG.STORAGE_KEY);
                State.orbits = [];
                State.connections = [];
                State.logs = [];
            }
        };

        /*=============================================
          AUDIO SERVICE
        =============================================*/
        const Audio = {
            context: null,
            
            init() {
                // Lazy init on first user interaction
            },
            
            getContext() {
                if (!this.context) {
                    this.context = new (window.AudioContext || window.webkitAudioContext)();
                }
                return this.context;
            },
            
            play(type) {
                if (!State.ui.audioEnabled) return;
                
                try {
                    const ctx = this.getContext();
                    const oscillator = ctx.createOscillator();
                    const gainNode = ctx.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(ctx.destination);
                    
                    gainNode.gain.value = CONFIG.AUDIO.volume;
                    
                    switch (type) {
                        case 'launch':
                            oscillator.frequency.setValueAtTime(220, ctx.currentTime);
                            oscillator.frequency.exponentialRampToValueAtTime(440, ctx.currentTime + 0.2);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
                            oscillator.start(ctx.currentTime);
                            oscillator.stop(ctx.currentTime + 0.3);
                            break;
                            
                        case 'complete':
                            oscillator.frequency.setValueAtTime(523, ctx.currentTime);
                            oscillator.frequency.setValueAtTime(659, ctx.currentTime + 0.1);
                            oscillator.frequency.setValueAtTime(784, ctx.currentTime + 0.2);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.4);
                            oscillator.start(ctx.currentTime);
                            oscillator.stop(ctx.currentTime + 0.4);
                            break;
                            
                        case 'abort':
                            oscillator.frequency.setValueAtTime(400, ctx.currentTime);
                            oscillator.frequency.exponentialRampToValueAtTime(100, ctx.currentTime + 0.3);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
                            oscillator.start(ctx.currentTime);
                            oscillator.stop(ctx.currentTime + 0.3);
                            break;
                            
                        case 'click':
                            oscillator.frequency.setValueAtTime(800, ctx.currentTime);
                            gainNode.gain.value = 0.1;
                            gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.05);
                            oscillator.start(ctx.currentTime);
                            oscillator.stop(ctx.currentTime + 0.05);
                            break;
                            
                        case 'warning':
                            oscillator.frequency.setValueAtTime(200, ctx.currentTime);
                            oscillator.frequency.setValueAtTime(300, ctx.currentTime + 0.1);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.2);
                            oscillator.start(ctx.currentTime);
                            oscillator.stop(ctx.currentTime + 0.2);
                            break;
                            
                        case 'link':
                            oscillator.type = 'sine';
                            oscillator.frequency.setValueAtTime(600, ctx.currentTime);
                            oscillator.frequency.exponentialRampToValueAtTime(900, ctx.currentTime + 0.15);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.2);
                            oscillator.start(ctx.currentTime);
                            oscillator.stop(ctx.currentTime + 0.2);
                            break;
                    }
                } catch (e) {
                    // Audio not supported or blocked
                }
            },
            
            toggle() {
                State.ui.audioEnabled = !State.ui.audioEnabled;
                Storage.save();
                return State.ui.audioEnabled;
            }
        };

        /*=============================================
          TOAST NOTIFICATIONS
        =============================================*/
        const Toast = {
            show(message, type = 'default', duration = 3000) {
                const toast = document.createElement('div');
                toast.className = `toast toast--${type}`;
                toast.textContent = message;
                
                DOM.toastContainer.appendChild(toast);
                
                // Trigger animation
                requestAnimationFrame(() => {
                    toast.classList.add('is-visible');
                });
                
                // Auto remove
                setTimeout(() => {
                    toast.classList.remove('is-visible');
                    setTimeout(() => toast.remove(), 300);
                }, duration);
            }
        };

        /*=============================================
          ORBIT MANAGEMENT
        =============================================*/
        const Orbits = {
            /**
             * Get orbit by ID
             */
            get(id) {
                return State.orbits.find(o => o.id === id);
            },
            
            /**
             * Create new orbit
             */
            create(data) {
                const orbit = {
                    id: Utils.generateId(),
                    name: data.name,
                    objective: data.objective || 'No objective defined',
                    deadline: data.deadline || null,
                    tier: data.tier,
                    duration: CONFIG.TIERS[data.tier].duration,
                    processes: Utils.clone(data.processes),
                    x: data.x ?? 100,
                    y: data.y ?? 100,
                    size: CONFIG.ORBIT_DEFAULTS.size,
                    isCompleted: false,
                    createdAt: new Date().toISOString()
                };
                
                State.orbits.push(orbit);
                Storage.save();
                
                return orbit;
            },
            
            /**
             * Update existing orbit
             */
            update(id, data) {
                const orbit = this.get(id);
                if (!orbit) return null;
                
                Object.assign(orbit, {
                    name: data.name ?? orbit.name,
                    objective: data.objective ?? orbit.objective,
                    deadline: data.deadline ?? orbit.deadline,
                    tier: data.tier ?? orbit.tier,
                    duration: data.tier ? CONFIG.TIERS[data.tier].duration : orbit.duration,
                    processes: data.processes ? Utils.clone(data.processes) : orbit.processes
                });
                
                Storage.save();
                return orbit;
            },
            
            /**
             * Update orbit position
             */
            updatePosition(id, x, y) {
                const orbit = this.get(id);
                if (!orbit) return;
                
                orbit.x = x;
                orbit.y = y;
                Storage.save();
            },
            
            /**
             * Update orbit size
             */
            updateSize(id, size) {
                const orbit = this.get(id);
                if (!orbit) return;
                
                orbit.size = Utils.clamp(size, CONFIG.ORBIT_DEFAULTS.minSize, CONFIG.ORBIT_DEFAULTS.maxSize);
                Storage.save();
            },
            
            /**
             * Mark orbit as completed
             */
            complete(id) {
                const orbit = this.get(id);
                if (!orbit) return;
                
                orbit.isCompleted = true;
                Storage.save();
            },
            
            /**
             * Delete orbit
             */
            delete(id) {
                const index = State.orbits.findIndex(o => o.id === id);
                if (index === -1) return false;
                
                // Remove associated connections
                State.connections = State.connections.filter(
                    c => c.sourceId !== id && c.targetId !== id
                );
                
                State.orbits.splice(index, 1);
                Storage.save();
                
                return true;
            },
            
            /**
             * Check if orbit is locked (has incomplete prerequisite)
             */
            isLocked(id) {
                const incomingConnections = State.connections.filter(c => c.targetId === id);
                
                if (incomingConnections.length === 0) return false;
                
                return incomingConnections.some(c => {
                    const sourceOrbit = this.get(c.sourceId);
                    return sourceOrbit && !sourceOrbit.isCompleted;
                });
            },
            
            /**
             * Reset all orbit completion status
             */
            resetAllProgress() {
                State.orbits.forEach(orbit => {
                    orbit.isCompleted = false;
                });
                Storage.save();
            },
            
            /**
             * Check if orbit can be deleted
             */
            canDelete(id) {
                const orbit = this.get(id);
                if (!orbit) return false;
                
                // Can always delete if completed
                if (orbit.isCompleted) return true;
                
                // Can delete if no objective set
                if (!orbit.objective || orbit.objective === 'No objective defined') return true;
                
                // Otherwise requires confirmation
                return false;
            }
        };

        /*=============================================
          CONNECTIONS MANAGEMENT
        =============================================*/
        const Connections = {
            /**
             * Check if connection exists
             */
            exists(sourceId, targetId) {
                return State.connections.some(
                    c => (c.sourceId === sourceId && c.targetId === targetId) ||
                         (c.sourceId === targetId && c.targetId === sourceId)
                );
            },
            
            /**
             * Create connection between orbits
             */
            create(sourceId, targetId) {
                if (sourceId === targetId) return false;
                if (this.exists(sourceId, targetId)) return false;
                
                State.connections.push({
                    id: Utils.generateId(),
                    sourceId,
                    targetId
                });
                
                Storage.save();
                return true;
            },
            
            /**
             * Remove connection
             */
            remove(sourceId, targetId) {
                const index = State.connections.findIndex(
                    c => (c.sourceId === sourceId && c.targetId === targetId) ||
                         (c.sourceId === targetId && c.targetId === sourceId)
                );
                
                if (index === -1) return false;
                
                State.connections.splice(index, 1);
                Storage.save();
                return true;
            },
            
            /**
             * Toggle connection (create or remove)
             */
            toggle(sourceId, targetId) {
                if (this.exists(sourceId, targetId)) {
                    this.remove(sourceId, targetId);
                    return { action: 'removed' };
                } else {
                    this.create(sourceId, targetId);
                    return { action: 'created' };
                }
            },
            
            /**
             * Clear all connections
             */
            clearAll() {
                State.connections = [];
                Storage.save();
            }
        };

        /*=============================================
          LOGS MANAGEMENT
        =============================================*/
        const Logs = {
            /**
             * Add log entry
             */
            add(data) {
                const entry = {
                    id: Utils.generateId(),
                    orbitId: data.orbitId,
                    orbitName: data.orbitName,
                    tier: data.tier,
                    score: data.score,
                    status: data.status, // 'COMPLETE', 'ABORTED', 'INCOMPLETE'
                    objectiveAchieved: data.objectiveAchieved,
                    processesSnapshot: Utils.clone(data.processes),
                    duration: data.duration,
                    timestamp: new Date().toISOString()
                };
                
                State.logs.unshift(entry);
                
                // Limit log history
                if (State.logs.length > 100) {
                    State.logs = State.logs.slice(0, 100);
                }
                
                Storage.save();
                return entry;
            },
            
            /**
             * Clear all logs
             */
            clear() {
                State.logs = [];
                Storage.save();
            }
        };

        /*=============================================
          MISSION CONTROLLER
        =============================================*/
        const Mission = {
            /**
             * Start a mission
             */
            start(orbitId) {
                const orbit = Orbits.get(orbitId);
                if (!orbit) return false;
                
                if (Orbits.isLocked(orbitId)) {
                    Toast.show('Complete prerequisite missions first', 'error');
                    return false;
                }
                
                State.mission = {
                    isActive: true,
                    isPaused: false,
                    orbitId: orbitId,
                    timeRemaining: orbit.duration * 60,
                    checklist: orbit.processes.map(p => ({
                        ...p,
                        isChecked: false
                    })),
                    timerId: null,
                    startTime: Date.now()
                };
                
                Audio.play('launch');
                this.startTimer();
                Renderer.renderHUD();
                
                DOM.hud.classList.add('is-active');
                DOM.hud.style.setProperty('--hud-color', CONFIG.TIERS[orbit.tier].color);
                
                return true;
            },
            
            /**
             * Start the timer
             */
            startTimer() {
                if (State.mission.timerId) {
                    clearInterval(State.mission.timerId);
                }
                
                State.mission.timerId = setInterval(() => {
                    if (!State.mission.isPaused) {
                        State.mission.timeRemaining--;
                        this.updateTimerDisplay();
                        
                        // Warning sound at threshold
                        if (State.mission.timeRemaining === CONFIG.TIMER_WARNING_THRESHOLD) {
                            Audio.play('warning');
                        }
                    }
                }, 1000);
            },
            
            /**
             * Update timer display
             */
            updateTimerDisplay() {
                const time = State.mission.timeRemaining;
                DOM.hudTimer.textContent = Utils.formatTime(time);
                
                // Add warning class
                if (time <= CONFIG.TIMER_WARNING_THRESHOLD && time > 0) {
                    DOM.hudTimer.classList.add('hud__timer--warning');
                    DOM.hudTimer.classList.remove('hud__timer--expired');
                } else if (time <= 0) {
                    DOM.hudTimer.classList.remove('hud__timer--warning');
                    DOM.hudTimer.classList.add('hud__timer--expired');
                } else {
                    DOM.hudTimer.classList.remove('hud__timer--warning', 'hud__timer--expired');
                }
            },
            
            /**
             * Toggle pause
             */
            togglePause() {
                State.mission.isPaused = !State.mission.isPaused;
                
                const btn = document.getElementById('btnPauseMission');
                btn.textContent = State.mission.isPaused ? 'RESUME' : 'PAUSE';
                
                if (State.mission.isPaused) {
                    Toast.show('Mission paused', 'info');
                }
            },
            
            /**
             * Toggle checklist item
             */
            toggleChecklistItem(index) {
                if (index < 0 || index >= State.mission.checklist.length) return;
                
                State.mission.checklist[index].isChecked = !State.mission.checklist[index].isChecked;
                Audio.play('click');
                
                this.updateIntegrity();
                Renderer.renderHUDChecklist();
            },
            
            /**
             * Calculate and update integrity score
             */
            updateIntegrity() {
                const checklist = State.mission.checklist;
                const positives = checklist.filter(p => p.type === 'positive');
                const negatives = checklist.filter(p => p.type === 'negative');
                
                let score = 100;
                
                // Deduct for unchecked positives
                if (positives.length > 0) {
                    const uncheckedPositives = positives.filter(p => !p.isChecked).length;
                    score -= (uncheckedPositives / positives.length) * 100;
                }
                
                // Deduct for checked negatives (things you should avoid but did)
                const checkedNegatives = negatives.filter(p => p.isChecked).length;
                score -= checkedNegatives * 15;
                
                score = Math.max(0, Math.round(score));
                
                DOM.hudIntegrityFill.style.width = `${score}%`;
                DOM.hudIntegrityValue.textContent = `${score}%`;
                
                return score;
            },
            
            /**
             * End mission
             */
            end(status) {
                if (!State.mission.isActive) return;
                
                clearInterval(State.mission.timerId);
                
                const orbit = Orbits.get(State.mission.orbitId);
                const score = this.updateIntegrity();
                
                // Determine final status
                let finalStatus = status;
                if (status === 'COMPLETE' && State.mission.timeRemaining > 0) {
                    finalStatus = 'COMPLETE';
                } else if (status === 'COMPLETE' && State.mission.timeRemaining <= 0) {
                    finalStatus = 'COMPLETE';
                } else if (status === 'ABORTED') {
                    finalStatus = 'ABORTED';
                }
                
                // Play appropriate sound
                if (finalStatus === 'COMPLETE') {
                    Audio.play('complete');
                } else {
                    Audio.play('abort');
                }
                
                // Store mission data for post-session
                State.pending.postSessionOrbitId = State.mission.orbitId;
                State.pending.postSessionData = {
                    orbitId: orbit.id,
                    orbitName: orbit.name,
                    tier: orbit.tier,
                    score: score,
                    status: finalStatus,
                    processes: State.mission.checklist,
                    duration: orbit.duration * 60 - State.mission.timeRemaining
                };
                
                // Hide HUD
                DOM.hud.classList.remove('is-active');
                
                // Show post-session modal
                this.showPostSessionModal(finalStatus, score);
                
                // Reset mission state
                State.mission = {
                    isActive: false,
                    isPaused: false,
                    orbitId: null,
                    timeRemaining: 0,
                    checklist: [],
                    timerId: null
                };
            },
            
            /**
             * Show post-session modal
             */
            showPostSessionModal(status, score) {
                const orbit = Orbits.get(State.pending.postSessionOrbitId);
                
                document.getElementById('postSessionIcon').textContent = 
                    status === 'COMPLETE' ? 'ðŸŽ¯' : 'âš ï¸';
                document.getElementById('postSessionSubtitle').textContent = 
                    `${status} â€¢ Integrity: ${score}%`;
                
                DOM.modalPostSession.classList.add('is-active');
            },
            
            /**
             * Handle post-session objective answer
             */
            handleObjectiveAnswer(achieved) {
                const data = State.pending.postSessionData;
                data.objectiveAchieved = achieved;
                
                // Log the session
                Logs.add(data);
                
                // Mark orbit as completed if objective achieved
                if (achieved) {
                    Orbits.complete(data.orbitId);
                    Toast.show('Objective achieved! Orbit completed.', 'success');
                } else {
                    Toast.show('Session logged. Keep pushing!', 'info');
                }
                
                // Close modal and re-render
                DOM.modalPostSession.classList.remove('is-active');
                State.pending.postSessionOrbitId = null;
                State.pending.postSessionData = null;
                
                Renderer.renderOrbits();
                Renderer.renderConnections();
                Renderer.renderLogs();
            }
        };

        /*=============================================
          RENDERER
        =============================================*/
        const Renderer = {
            /**
             * Render all orbits
             */
            renderOrbits() {
                if (State.orbits.length === 0) {
                    DOM.emptyState.classList.remove('hidden');
                    DOM.orbitContainer.innerHTML = '';
                    return;
                }
                
                DOM.emptyState.classList.add('hidden');
                
                DOM.orbitContainer.innerHTML = State.orbits.map(orbit => {
                    const tier = CONFIG.TIERS[orbit.tier];
                    const isLocked = Orbits.isLocked(orbit.id);
                    const isLinkSource = State.ui.linkingOrbitId === orbit.id;
                    const isLinkTarget = State.ui.linkingOrbitId && State.ui.linkingOrbitId !== orbit.id;
                    
                    const classList = [
                        'orbit',
                        `orbit--tier-${orbit.tier}`,
                        isLocked ? 'is-locked' : '',
                        orbit.isCompleted ? 'is-completed' : '',
                        isLinkSource ? 'is-link-source' : '',
                        isLinkTarget ? 'is-link-target' : ''
                    ].filter(Boolean).join(' ');
                    
                    const fontSize = Math.max(10, orbit.size / 10);
                    
                    return `
                        <div 
                            class="${classList}"
                            data-orbit-id="${orbit.id}"
                            style="
                                left: ${orbit.x}px;
                                top: ${orbit.y}px;
                                width: ${orbit.size}px;
                                height: ${orbit.size}px;
                                font-size: ${fontSize}px;
                                --orbit-color: ${tier.color};
                                --orbit-glow: ${tier.glow};
                            "
                        >
                            <div class="orbit__ring"></div>
                            <div class="orbit__ring orbit__ring--inner"></div>
                            
                            <div class="orbit__controls">
                                <button 
                                    class="orbit__ctrl-btn orbit__ctrl-btn--launch"
                                    data-action="launch"
                                    data-orbit-id="${orbit.id}"
                                    aria-label="Launch mission"
                                    title="Launch"
                                    ${isLocked ? 'disabled' : ''}
                                >
                                    ðŸš€
                                </button>
                                <button 
                                    class="orbit__ctrl-btn orbit__ctrl-btn--link ${isLinkSource ? 'is-active' : ''}"
                                    data-action="link"
                                    data-orbit-id="${orbit.id}"
                                    aria-label="Link orbit"
                                    title="Link"
                                >
                                    ðŸ”—
                                </button>
                                <button 
                                    class="orbit__ctrl-btn"
                                    data-action="edit"
                                    data-orbit-id="${orbit.id}"
                                    aria-label="Edit orbit"
                                    title="Edit"
                                >
                                    âœŽ
                                </button>
                                <button 
                                    class="orbit__ctrl-btn orbit__ctrl-btn--delete"
                                    data-action="delete"
                                    data-orbit-id="${orbit.id}"
                                    aria-label="Delete orbit"
                                    title="Delete"
                                >
                                    Ã—
                                </button>
                            </div>
                            
                            <div class="orbit__core" data-action="select" data-orbit-id="${orbit.id}">
                                <div class="orbit__particles">
                                    ${this.generateParticles(5)}
                                </div>
                                <div class="orbit__icon">${orbit.isCompleted ? 'âœ“' : 'â—'}</div>
                                <div class="orbit__name">${Utils.escapeHtml(orbit.name)}</div>
                                <div class="orbit__duration">${tier.label}</div>
                            </div>
                            
                            <div class="orbit__resize" data-action="resize" data-orbit-id="${orbit.id}"></div>
                        </div>
                    `;
                }).join('');
            },
            
            /**
             * Generate particle elements
             */
            generateParticles(count) {
                return Array.from({ length: count }, (_, i) => {
                    const angle = (360 / count) * i;
                    const delay = i * 0.5;
                    return `<div class="orbit__particle" style="
                        left: ${50 + 40 * Math.cos(angle * Math.PI / 180)}%;
                        top: ${50 + 40 * Math.sin(angle * Math.PI / 180)}%;
                        animation-delay: ${delay}s;
                    "></div>`;
                }).join('');
            },
            
            /**
             * Render connections
             */
            renderConnections() {
                // Clear existing lines (keep defs)
                const svg = DOM.svgConnections;
                const defs = svg.querySelector('defs');
                svg.innerHTML = '';
                svg.appendChild(defs);
                
                State.connections.forEach(conn => {
                    const source = Orbits.get(conn.sourceId);
                    const target = Orbits.get(conn.targetId);
                    
                    if (!source || !target) return;
                    
                    const sourceCenter = {
                        x: source.x + source.size / 2,
                        y: source.y + source.size / 2
                    };
                    
                    const targetCenter = {
                        x: target.x + target.size / 2,
                        y: target.y + target.size / 2
                    };
                    
                    const isActive = source.isCompleted;
                    const isLocked = !source.isCompleted;
                    
                    // Create line
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', sourceCenter.x);
                    line.setAttribute('y1', sourceCenter.y);
                    line.setAttribute('x2', targetCenter.x);
                    line.setAttribute('y2', targetCenter.y);
                    line.setAttribute('class', `connection-line ${isActive ? 'connection-line--active' : ''} ${isLocked ? 'connection-line--locked' : ''}`);
                    line.setAttribute('marker-end', 'url(#arrowMarker)');
                    
                    // Create hitbox for interaction
                    const hitbox = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    hitbox.setAttribute('x1', sourceCenter.x);
                    hitbox.setAttribute('y1', sourceCenter.y);
                    hitbox.setAttribute('x2', targetCenter.x);
                    hitbox.setAttribute('y2', targetCenter.y);
                    hitbox.setAttribute('class', 'connection-hitbox');
                    hitbox.setAttribute('data-source-id', conn.sourceId);
                    hitbox.setAttribute('data-target-id', conn.targetId);
                    
                    svg.appendChild(line);
                    svg.appendChild(hitbox);
                });
            },
            
            /**
             * Render logs panel
             */
            renderLogs() {
                if (State.logs.length === 0) {
                    DOM.logList.innerHTML = `
                        <div class="log-empty">
                            <div class="log-empty__icon">ðŸ“­</div>
                            <div class="log-empty__text">NO LOGS YET</div>
                        </div>
                    `;
                    return;
                }
                
                DOM.logList.innerHTML = State.logs.map(log => {
                    const tier = CONFIG.TIERS[log.tier];
                    const statusClass = log.status.toLowerCase();
                    
                    return `
                        <div class="log-entry" style="--log-color: ${tier.color}">
                            <div class="log-entry__info">
                                <div class="log-entry__name">${Utils.escapeHtml(log.orbitName)}</div>
                                <div class="log-entry__meta">
                                    <span>${Utils.formatTimestamp(new Date(log.timestamp))}</span>
                                    <span>â€¢</span>
                                    <span>${log.objectiveAchieved ? 'âœ“ Objective' : 'â—‹ In Progress'}</span>
                                </div>
                            </div>
                            <div class="log-entry__stats">
                                <div class="log-entry__score">${log.score}%</div>
                                <div class="log-entry__status log-entry__status--${statusClass}">${log.status}</div>
                            </div>
                        </div>
                    `;
                }).join('');
                        },
            
            /**
             * Render HUD
             */
            renderHUD() {
                const orbit = Orbits.get(State.mission.orbitId);
                if (!orbit) return;
                
                DOM.hudMissionName.textContent = orbit.name.toUpperCase();
                this.updateTimerDisplay();
                this.renderHUDChecklist();
                Mission.updateIntegrity();
            },
            
            /**
             * Update timer display
             */
            updateTimerDisplay() {
                DOM.hudTimer.textContent = Utils.formatTime(State.mission.timeRemaining);
            },
            
            /**
             * Render HUD checklist
             */
            renderHUDChecklist() {
                DOM.hudChecklist.innerHTML = State.mission.checklist.map((item, index) => {
                    const typeClass = item.type === 'negative' ? 'hud__checklist-item--negative' : '';
                    const checkedClass = item.isChecked ? 'is-checked' : '';
                    
                    return `
                        <div 
                            class="hud__checklist-item ${typeClass} ${checkedClass}"
                            data-checklist-index="${index}"
                            role="checkbox"
                            aria-checked="${item.isChecked}"
                            tabindex="0"
                        >
                            <div class="hud__checklist-checkbox">${item.isChecked ? 'âœ“' : ''}</div>
                            <div class="hud__checklist-text">${Utils.escapeHtml(item.text)}</div>
                            <div class="hud__checklist-type hud__checklist-type--${item.type}">
                                ${item.type === 'positive' ? 'DO' : 'AVOID'}
                            </div>
                        </div>
                    `;
                }).join('');
            },
            
            /**
             * Render editor process list
             */
            renderEditorProcesses() {
                if (State.editor.processes.length === 0) {
                    DOM.processList.innerHTML = `
                        <div class="text-center" style="padding: 20px; color: var(--color-gray-500); font-size: 0.8rem;">
                            No processes added yet
                        </div>
                    `;
                    return;
                }
                
                DOM.processList.innerHTML = State.editor.processes.map((proc, index) => `
                    <div class="process-item" data-process-index="${index}">
                        <div class="process-item__content">
                            <span class="process-tag process-tag--${proc.type}">
                                ${proc.type === 'positive' ? '+' : 'âˆ’'}
                            </span>
                            <span class="process-item__text">${Utils.escapeHtml(proc.text)}</span>
                        </div>
                        <button 
                            type="button" 
                            class="process-item__delete" 
                            data-action="delete-process"
                            data-process-index="${index}"
                            aria-label="Delete process"
                        >
                            Ã—
                        </button>
                    </div>
                `).join('');
            },
            
            /**
             * Update system status
             */
            updateStatus(message) {
                DOM.systemStatus.textContent = message;
            }
        };

        /*=============================================
          EDITOR CONTROLLER
        =============================================*/
        const Editor = {
            /**
             * Select tier
             */
            selectTier(tier) {
                State.editor.selectedTier = tier;
                
                // Update UI
                document.querySelectorAll('.tier-option').forEach(el => {
                    const isSelected = el.dataset.tier === tier;
                    el.classList.toggle('is-selected', isSelected);
                    el.setAttribute('aria-checked', isSelected);
                });
                
                Audio.play('click');
            },
            
            /**
             * Toggle process input visibility
             */
            toggleProcessInput() {
                const isVisible = DOM.processInputRow.classList.toggle('is-visible');
                DOM.btnToggleProcessInput.setAttribute('aria-expanded', isVisible);
                
                if (isVisible) {
                    DOM.inputProcessText.focus();
                }
            },
            
            /**
             * Add process
             */
            addProcess(type) {
                const text = DOM.inputProcessText.value.trim();
                if (!text) {
                    DOM.inputProcessText.focus();
                    return;
                }
                
                State.editor.processes.push({ text, type });
                DOM.inputProcessText.value = '';
                DOM.inputProcessText.focus();
                
                Audio.play('click');
                Renderer.renderEditorProcesses();
            },
            
            /**
             * Delete process
             */
            deleteProcess(index) {
                State.editor.processes.splice(index, 1);
                Renderer.renderEditorProcesses();
            },
            
            /**
             * Load orbit into editor for editing
             */
            loadOrbit(orbitId) {
                const orbit = Orbits.get(orbitId);
                if (!orbit) return;
                
                State.editor.isEditing = true;
                State.editor.editingId = orbitId;
                State.editor.selectedTier = orbit.tier;
                State.editor.processes = Utils.clone(orbit.processes);
                
                // Populate form
                DOM.inputOrbitName.value = orbit.name;
                DOM.inputOrbitObjective.value = orbit.objective || '';
                DOM.inputOrbitDeadline.value = orbit.deadline || '';
                
                // Select tier
                this.selectTier(orbit.tier);
                
                // Update UI
                document.getElementById('editorPanelTitle').textContent = 'EDIT ORBIT';
                DOM.btnSaveOrbit.textContent = 'UPDATE ORBIT';
                DOM.btnCancelEdit.classList.remove('hidden');
                DOM.panelEditor.classList.add('is-focused');
                
                Renderer.renderEditorProcesses();
                
                // Show panel on mobile
                DOM.panelEditor.classList.add('is-active');
            },
            
            /**
             * Save orbit (create or update)
             */
            save() {
                const name = DOM.inputOrbitName.value.trim();
                const objective = DOM.inputOrbitObjective.value.trim();
                const deadline = DOM.inputOrbitDeadline.value;
                const tier = State.editor.selectedTier;
                const processes = State.editor.processes;
                
                // Validation
                if (!name) {
                    Toast.show('Please enter a codename', 'error');
                    DOM.inputOrbitName.focus();
                    return;
                }
                
                if (!tier) {
                    Toast.show('Please select a duration tier', 'error');
                    return;
                }
                
                const data = { name, objective, deadline, tier, processes };
                
                if (State.editor.isEditing) {
                    Orbits.update(State.editor.editingId, data);
                    Toast.show('Orbit updated', 'success');
                } else {
                    // Position new orbit in center-ish area with some randomness
                    const rect = DOM.spaceArea.getBoundingClientRect();
                    data.x = Math.random() * (rect.width - 200) + 50;
                    data.y = Math.random() * (rect.height - 200) + 50;
                    
                    Orbits.create(data);
                    Toast.show('Orbit initialized', 'success');
                }
                
                Audio.play('launch');
                this.reset();
                Renderer.renderOrbits();
                Renderer.renderConnections();
            },
            
            /**
             * Reset editor to default state
             */
            reset() {
                State.editor = {
                    isEditing: false,
                    editingId: null,
                    selectedTier: null,
                    processes: []
                };
                
                // Clear form
                DOM.inputOrbitName.value = '';
                DOM.inputOrbitObjective.value = '';
                DOM.inputOrbitDeadline.value = '';
                DOM.inputProcessText.value = '';
                
                // Reset tier selection
                document.querySelectorAll('.tier-option').forEach(el => {
                    el.classList.remove('is-selected');
                    el.setAttribute('aria-checked', 'false');
                });
                
                // Update UI
                document.getElementById('editorPanelTitle').textContent = 'MISSION COMMAND';
                DOM.btnSaveOrbit.textContent = 'INITIALIZE ORBIT';
                DOM.btnCancelEdit.classList.add('hidden');
                DOM.panelEditor.classList.remove('is-focused');
                DOM.processInputRow.classList.remove('is-visible');
                
                Renderer.renderEditorProcesses();
            }
        };

        /*=============================================
          DRAG & DROP CONTROLLER
        =============================================*/
        const DragDrop = {
            /**
             * Start dragging orbit
             */
            startDrag(e, orbitId) {
                // Ignore if clicking on controls or resize handle
                if (e.target.closest('.orbit__controls') || 
                    e.target.closest('.orbit__resize')) {
                    return;
                }
                
                const orbit = Orbits.get(orbitId);
                if (!orbit) return;
                
                const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                const clientY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
                
                State.ui.dragging = {
                    active: true,
                    orbitId: orbitId,
                    offsetX: clientX - orbit.x,
                    offsetY: clientY - orbit.y
                };
                
                const orbitEl = document.querySelector(`[data-orbit-id="${orbitId}"]`);
                if (orbitEl) {
                    orbitEl.classList.add('is-dragging');
                }
            },
            
            /**
             * Handle drag movement
             */
            onDrag(e) {
                if (!State.ui.dragging.active) return;
                
                e.preventDefault();
                
                const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                const clientY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
                
                const orbit = Orbits.get(State.ui.dragging.orbitId);
                if (!orbit) return;
                
                const rect = DOM.spaceArea.getBoundingClientRect();
                const margin = 20;
                
                let x = clientX - State.ui.dragging.offsetX;
                let y = clientY - State.ui.dragging.offsetY;
                
                // Constrain to space area
                x = Utils.clamp(x, margin, rect.width - orbit.size - margin);
                y = Utils.clamp(y, margin, rect.height - orbit.size - margin);
                
                // Update DOM directly for smooth movement
                const orbitEl = document.querySelector(`[data-orbit-id="${orbit.id}"]`);
                if (orbitEl) {
                    orbitEl.style.left = `${x}px`;
                    orbitEl.style.top = `${y}px`;
                }
                
                // Update connections in real-time
                orbit.x = x;
                orbit.y = y;
                Renderer.renderConnections();
            },
            
            /**
             * End drag operation
             */
            endDrag() {
                if (!State.ui.dragging.active) return;
                
                const orbit = Orbits.get(State.ui.dragging.orbitId);
                const orbitEl = document.querySelector(`[data-orbit-id="${State.ui.dragging.orbitId}"]`);
                
                if (orbitEl) {
                    orbitEl.classList.remove('is-dragging');
                    
                    // Save final position
                    if (orbit) {
                        orbit.x = parseInt(orbitEl.style.left);
                        orbit.y = parseInt(orbitEl.style.top);
                        Storage.save();
                    }
                }
                
                State.ui.dragging = { active: false, orbitId: null, offsetX: 0, offsetY: 0 };
            }
        };

        /*=============================================
          RESIZE CONTROLLER
        =============================================*/
        const Resize = {
            /**
             * Start resizing orbit
             */
            startResize(e, orbitId) {
                e.stopPropagation();
                e.preventDefault();
                
                const orbit = Orbits.get(orbitId);
                if (!orbit) return;
                
                const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                
                State.ui.resizing = {
                    active: true,
                    orbitId: orbitId,
                    startX: clientX,
                    startSize: orbit.size
                };
            },
            
            /**
             * Handle resize movement
             */
            onResize(e) {
                if (!State.ui.resizing.active) return;
                
                e.preventDefault();
                
                const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                const diff = clientX - State.ui.resizing.startX;
                const newSize = Utils.clamp(
                    State.ui.resizing.startSize + diff,
                    CONFIG.ORBIT_DEFAULTS.minSize,
                    CONFIG.ORBIT_DEFAULTS.maxSize
                );
                
                const orbitEl = document.querySelector(`[data-orbit-id="${State.ui.resizing.orbitId}"]`);
                if (orbitEl) {
                    orbitEl.style.width = `${newSize}px`;
                    orbitEl.style.height = `${newSize}px`;
                    orbitEl.style.fontSize = `${Math.max(10, newSize / 10)}px`;
                }
            },
            
            /**
             * End resize operation
             */
            endResize() {
                if (!State.ui.resizing.active) return;
                
                const orbitEl = document.querySelector(`[data-orbit-id="${State.ui.resizing.orbitId}"]`);
                if (orbitEl) {
                    const newSize = parseInt(orbitEl.style.width);
                    Orbits.updateSize(State.ui.resizing.orbitId, newSize);
                }
                
                // Update connections
                Renderer.renderConnections();
                
                State.ui.resizing = { active: false, orbitId: null, startX: 0, startSize: 0 };
            }
        };

        /*=============================================
          LINKING CONTROLLER
        =============================================*/
        const Linking = {
            /**
             * Start or toggle link mode
             */
            startLink(orbitId) {
                if (State.ui.linkingOrbitId === orbitId) {
                    // Cancel link mode
                    this.cancelLink();
                } else {
                    State.ui.linkingOrbitId = orbitId;
                    Toast.show('Select target orbit to connect/disconnect', 'info');
                    Renderer.renderOrbits();
                    Renderer.renderConnections();
                }
            },
            
            /**
             * Complete link to target
             */
            completeLink(targetId) {
                if (!State.ui.linkingOrbitId) return;
                if (State.ui.linkingOrbitId === targetId) {
                    Toast.show('Cannot link orbit to itself', 'error');
                    return;
                }
                
                const result = Connections.toggle(State.ui.linkingOrbitId, targetId);
                
                if (result.action === 'created') {
                    Toast.show('Orbits connected', 'success');
                    Audio.play('link');
                } else {
                    Toast.show('Connection severed', 'info');
                }
                
                this.cancelLink();
            },
            
            /**
             * Cancel link mode
             */
            cancelLink() {
                State.ui.linkingOrbitId = null;
                Renderer.renderOrbits();
                Renderer.renderConnections();
            }
        };

        /*=============================================
          MODAL CONTROLLER
        =============================================*/
        const Modal = {
            /**
             * Show confirmation modal
             */
            confirm(message, callback) {
                document.getElementById('confirmMessage').textContent = message;
                State.pending.confirmCallback = callback;
                DOM.modalConfirm.classList.add('is-active');
            },
            
            /**
             * Handle confirm OK
             */
            handleConfirmOk() {
                if (State.pending.confirmCallback) {
                    State.pending.confirmCallback();
                    State.pending.confirmCallback = null;
                }
                DOM.modalConfirm.classList.remove('is-active');
            },
            
            /**
             * Handle confirm cancel
             */
            handleConfirmCancel() {
                State.pending.confirmCallback = null;
                DOM.modalConfirm.classList.remove('is-active');
            },
            
            /**
             * Show data modal
             */
            showDataModal() {
                document.getElementById('dataTextarea').value = '';
                DOM.modalData.classList.add('is-active');
            },
            
            /**
             * Handle export
             */
            handleExport() {
                const data = Storage.export();
                document.getElementById('dataTextarea').value = data;
                Toast.show('Data exported to textarea', 'success');
            },
            
            /**
             * Handle import
             */
            handleImport() {
                const data = document.getElementById('dataTextarea').value.trim();
                if (!data) {
                    Toast.show('Please paste JSON data first', 'error');
                    return;
                }
                
                if (Storage.import(data)) {
                    Toast.show('Data imported successfully', 'success');
                    DOM.modalData.classList.remove('is-active');
                    Renderer.renderOrbits();
                    Renderer.renderConnections();
                    Renderer.renderLogs();
                } else {
                    Toast.show('Invalid data format', 'error');
                }
            },
            
            /**
             * Show shortcuts modal
             */
            showShortcuts() {
                DOM.modalShortcuts.classList.add('is-active');
            },
            
            /**
             * Close all modals
             */
            closeAll() {
                DOM.modalPostSession.classList.remove('is-active');
                DOM.modalConfirm.classList.remove('is-active');
                DOM.modalData.classList.remove('is-active');
                DOM.modalShortcuts.classList.remove('is-active');
            }
        };

        /*=============================================
          EVENT HANDLERS
        =============================================*/
        const Events = {
            /**
             * Initialize all event listeners
             */
            init() {
                // Tier selection
                document.querySelectorAll('.tier-option').forEach(el => {
                    el.addEventListener('click', () => {
                        Editor.selectTier(el.dataset.tier);
                    });
                });
                
                // Process input toggle
                DOM.btnToggleProcessInput.addEventListener('click', () => {
                    Editor.toggleProcessInput();
                });
                
                // Add process buttons
                document.getElementById('btnAddPositive').addEventListener('click', () => {
                    Editor.addProcess('positive');
                });
                
                document.getElementById('btnAddNegative').addEventListener('click', () => {
                    Editor.addProcess('negative');
                });
                
                // Process input enter key
                DOM.inputProcessText.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        Editor.addProcess('positive');
                    }
                });
                
                // Process list delegation
                DOM.processList.addEventListener('click', (e) => {
                    const deleteBtn = e.target.closest('[data-action="delete-process"]');
                    if (deleteBtn) {
                        Editor.deleteProcess(parseInt(deleteBtn.dataset.processIndex));
                    }
                });
                
                // Save orbit
                DOM.btnSaveOrbit.addEventListener('click', () => {
                    Editor.save();
                });
                
                // Cancel edit
                DOM.btnCancelEdit.addEventListener('click', () => {
                    Editor.reset();
                });
                
                // Orbit container delegation
                DOM.orbitContainer.addEventListener('mousedown', (e) => this.handleOrbitMouseDown(e));
                DOM.orbitContainer.addEventListener('touchstart', (e) => this.handleOrbitMouseDown(e), { passive: false });
                DOM.orbitContainer.addEventListener('click', (e) => this.handleOrbitClick(e));
                
                // Drag & resize global handlers
                document.addEventListener('mousemove', (e) => this.handleMouseMove(e));
                document.addEventListener('touchmove', (e) => this.handleMouseMove(e), { passive: false });
                document.addEventListener('mouseup', () => this.handleMouseUp());
                document.addEventListener('touchend', () => this.handleMouseUp());
                
                // Space area click (cancel link mode)
                DOM.spaceArea.addEventListener('click', (e) => {
                    if (e.target === DOM.spaceArea || e.target.closest('.space-area__svg')) {
                        if (State.ui.linkingOrbitId) {
                            Linking.cancelLink();
                        }
                    }
                });
                
                // Connection hitbox double-click
                DOM.svgConnections.addEventListener('dblclick', (e) => {
                    const hitbox = e.target.closest('.connection-hitbox');
                    if (hitbox) {
                        Modal.confirm('Remove this connection?', () => {
                            Connections.remove(hitbox.dataset.sourceId, hitbox.dataset.targetId);
                            Renderer.renderOrbits();
                            Renderer.renderConnections();
                            Toast.show('Connection removed', 'info');
                        });
                    }
                });
                
                // HUD checklist delegation
                DOM.hudChecklist.addEventListener('click', (e) => {
                    const item = e.target.closest('.hud__checklist-item');
                    if (item) {
                        Mission.toggleChecklistItem(parseInt(item.dataset.checklistIndex));
                    }
                });
                
                // HUD buttons
                document.getElementById('btnPauseMission').addEventListener('click', () => {
                    Mission.togglePause();
                });
                
                document.getElementById('btnAbortMission').addEventListener('click', () => {
                    Modal.confirm('Abort this mission?', () => {
                        Mission.end('ABORTED');
                    });
                });
                
                document.getElementById('btnCompleteMission').addEventListener('click', () => {
                    Mission.end('COMPLETE');
                });
                
                // Post-session modal
                document.getElementById('btnObjectiveYes').addEventListener('click', () => {
                    Mission.handleObjectiveAnswer(true);
                });
                
                document.getElementById('btnObjectiveNo').addEventListener('click', () => {
                    Mission.handleObjectiveAnswer(false);
                });
                
                // Confirm modal
                document.getElementById('btnConfirmOk').addEventListener('click', () => {
                    Modal.handleConfirmOk();
                });
                
                document.getElementById('btnConfirmCancel').addEventListener('click', () => {
                    Modal.handleConfirmCancel();
                });
                
                // Data modal
                document.getElementById('btnDataModal').addEventListener('click', () => {
                    Modal.showDataModal();
                });
                
                document.getElementById('btnExportData').addEventListener('click', () => {
                    Modal.handleExport();
                });
                
                document.getElementById('btnImportData').addEventListener('click', () => {
                    Modal.handleImport();
                });
                
                document.getElementById('btnCloseDataModal').addEventListener('click', () => {
                    DOM.modalData.classList.remove('is-active');
                });
                
                // Shortcuts modal
                document.getElementById('btnShortcuts').addEventListener('click', () => {
                    Modal.showShortcuts();
                });
                
                document.getElementById('btnCloseShortcuts').addEventListener('click', () => {
                    DOM.modalShortcuts.classList.remove('is-active');
                });
                
                // Audio toggle
                document.getElementById('btnToggleAudio').addEventListener('click', () => {
                    const enabled = Audio.toggle();
                    const btn = document.getElementById('btnToggleAudio');
                    btn.textContent = enabled ? 'ðŸ”Š' : 'ðŸ”‡';
                    Toast.show(enabled ? 'Sound enabled' : 'Sound muted', 'info');
                });
                
                // Panel footer buttons
                document.getElementById('btnResetProgress').addEventListener('click', () => {
                    Modal.confirm('Reset all orbit progress? This will mark all orbits as incomplete.', () => {
                        Orbits.resetAllProgress();
                        Renderer.renderOrbits();
                        Renderer.renderConnections();
                        Toast.show('Progress reset', 'success');
                    });
                });
                
                document.getElementById('btnClearLogs').addEventListener('click', () => {
                    Modal.confirm('Purge all flight logs?', () => {
                        Logs.clear();
                        Renderer.renderLogs();
                        Toast.show('Logs purged', 'success');
                    });
                });
                
                document.getElementById('btnClearLinks').addEventListener('click', () => {
                    Modal.confirm('Sever all orbit connections?', () => {
                        Connections.clearAll();
                        Renderer.renderOrbits();
                        Renderer.renderConnections();
                        Toast.show('All connections severed', 'success');
                    });
                });
                
                // Mobile panel toggles
                document.getElementById('btnToggleEditor').addEventListener('click', () => {
                    DOM.panelEditor.classList.toggle('is-active');
                    DOM.panelLogs.classList.remove('is-active');
                });
                
                document.getElementById('btnToggleLogs').addEventListener('click', () => {
                    DOM.panelLogs.classList.toggle('is-active');
                    DOM.panelEditor.classList.remove('is-active');
                });
                
                document.getElementById('btnCloseEditor').addEventListener('click', () => {
                    DOM.panelEditor.classList.remove('is-active');
                });
                
                document.getElementById('btnCloseLogs').addEventListener('click', () => {
                    DOM.panelLogs.classList.remove('is-active');
                });
                
                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => this.handleKeyDown(e));
                
                // Window resize - update connections
                window.addEventListener('resize', Utils.debounce(() => {
                    Renderer.renderConnections();
                }, 250));
            },
            
            /**
             * Handle orbit mousedown/touchstart
             */
            handleOrbitMouseDown(e) {
                const orbitEl = e.target.closest('.orbit');
                if (!orbitEl) return;
                
                const orbitId = orbitEl.dataset.orbitId;
                
                // Check for resize handle
                if (e.target.closest('.orbit__resize')) {
                    Resize.startResize(e, orbitId);
                    return;
                }
                
                // Check for control buttons
                if (e.target.closest('.orbit__controls')) {
                    return;
                }
                
                // Start drag
                DragDrop.startDrag(e, orbitId);
            },
            
            /**
             * Handle orbit click
             */
            handleOrbitClick(e) {
                const orbitEl = e.target.closest('.orbit');
                if (!orbitEl) return;
                
                const orbitId = orbitEl.dataset.orbitId;
                const action = e.target.closest('[data-action]')?.dataset.action;
                
                switch (action) {
                    case 'launch':
                        Mission.start(orbitId);
                        break;
                        
                    case 'link':
                        Linking.startLink(orbitId);
                        break;
                        
                    case 'edit':
                        Editor.loadOrbit(orbitId);
                        break;
                        
                    case 'delete':
                        this.handleDeleteOrbit(orbitId);
                        break;
                        
                    case 'select':
                        // If in link mode, complete the link
                        if (State.ui.linkingOrbitId) {
                            Linking.completeLink(orbitId);
                        }
                        break;
                }
            },
            
            /**
             * Handle delete orbit
             */
            handleDeleteOrbit(orbitId) {
                const orbit = Orbits.get(orbitId);
                if (!orbit) return;
                
                if (Orbits.canDelete(orbitId)) {
                    Modal.confirm(`Delete orbit "${orbit.name}"?`, () => {
                        Orbits.delete(orbitId);
                        Renderer.renderOrbits();
                        Renderer.renderConnections();
                        Toast.show('Orbit deleted', 'info');
                    });
                } else {
                    Modal.confirm(
                        `"${orbit.name}" has an incomplete objective. Delete anyway? This breaks your commitment.`,
                        () => {
                            Orbits.delete(orbitId);
                            Renderer.renderOrbits();
                            Renderer.renderConnections();
                            Toast.show('Orbit deleted (commitment broken)', 'error');
                        }
                    );
                }
            },
            
            /**
             * Handle mouse move (drag/resize)
             */
            handleMouseMove(e) {
                if (State.ui.dragging.active) {
                    DragDrop.onDrag(e);
                } else if (State.ui.resizing.active) {
                    Resize.onResize(e);
                }
            },
            
            /**
             * Handle mouse up (end drag/resize)
             */
            handleMouseUp() {
                if (State.ui.dragging.active) {
                    DragDrop.endDrag();
                } else if (State.ui.resizing.active) {
                    Resize.endResize();
                }
            },
            
            /**
             * Handle keyboard shortcuts
             */
            handleKeyDown(e) {
                // Ignore if typing in input
                if (e.target.matches('input, textarea')) return;
                
                // Escape - close modals, cancel link
                if (e.key === 'Escape') {
                    if (State.mission.isActive) {
                        Mission.togglePause();
                    } else if (State.ui.linkingOrbitId) {
                        Linking.cancelLink();
                    } else {
                        Modal.closeAll();
                    }
                    return;
                }
                
                // Don't process shortcuts if modal is open
                if (document.querySelector('.modal-overlay.is-active')) return;
                
                // Don't process if HUD is active (except space for pause)
                if (State.mission.isActive) {
                    if (e.key === ' ' || e.code === 'Space') {
                        e.preventDefault();
                        Mission.togglePause();
                    }
                    return;
                }
                
                switch (e.key.toLowerCase()) {
                    case 'e':
                        DOM.panelEditor.classList.toggle('is-active');
                        DOM.panelLogs.classList.remove('is-active');
                        break;
                        
                    case 'l':
                        DOM.panelLogs.classList.toggle('is-active');
                        DOM.panelEditor.classList.remove('is-active');
                        break;
                        
                    case 'i':
                        Modal.showDataModal();
                        break;
                        
                    case 'm':
                        document.getElementById('btnToggleAudio').click();
                        break;
                        
                    case '?':
                        Modal.showShortcuts();
                        break;
                }
            }
        };

        /*=============================================
          INITIALIZATION
        =============================================*/
        function init() {
            // Cache DOM elements
            DOM.panelEditor = document.getElementById('panelEditor');
            DOM.panelLogs = document.getElementById('panelLogs');
            DOM.spaceArea = document.getElementById('spaceArea');
            DOM.orbitContainer = document.getElementById('orbitContainer');
            DOM.svgConnections = document.getElementById('svgConnections');
            DOM.inputOrbitName = document.getElementById('inputOrbitName');
            DOM.inputOrbitObjective = document.getElementById('inputOrbitObjective');
            DOM.inputOrbitDeadline = document.getElementById('inputOrbitDeadline');
            DOM.inputProcessText = document.getElementById('inputProcessText');
            DOM.processList = document.getElementById('processList');
            DOM.processInputRow = document.getElementById('processInputRow');
            DOM.btnToggleProcessInput = document.getElementById('btnToggleProcessInput');
            DOM.btnSaveOrbit = document.getElementById('btnSaveOrbit');
            DOM.btnCancelEdit = document.getElementById('btnCancelEdit');
            DOM.hud = document.getElementById('hud');
            DOM.hudMissionName = document.getElementById('hudMissionName');
            DOM.hudTimer = document.getElementById('hudTimer');
            DOM.hudIntegrityFill = document.getElementById('hudIntegrityFill');
            DOM.hudIntegrityValue = document.getElementById('hudIntegrityValue');
            DOM.hudChecklist = document.getElementById('hudChecklist');
            DOM.modalPostSession = document.getElementById('modalPostSession');
            DOM.modalConfirm = document.getElementById('modalConfirm');
            DOM.modalData = document.getElementById('modalData');
            DOM.modalShortcuts = document.getElementById('modalShortcuts');
            DOM.toastContainer = document.getElementById('toastContainer');
            DOM.logList = document.getElementById('logList');
            DOM.emptyState = document.getElementById('emptyState');
            DOM.systemStatus = document.getElementById('systemStatus');
            
            // Load saved data
            Storage.load();
            
            // Update audio button state
            const audioBtn = document.getElementById('btnToggleAudio');
            audioBtn.textContent = State.ui.audioEnabled ? 'ðŸ”Š' : 'ðŸ”‡';
            
            // Initialize event listeners
            Events.init();
            
            // Initial render
            Renderer.renderOrbits();
            Renderer.renderConnections();
            Renderer.renderLogs();
            Renderer.renderEditorProcesses();
            
            // Update status
            Renderer.updateStatus('SYSTEM READY');
            
            console.log('ðŸŒŒ Infinity Orbit v2.0 initialized');
        }

        // Start application when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }

    })();
    </script>

</body>
</html>
